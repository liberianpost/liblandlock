<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Liberia Land Lock System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: white;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .header-images {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .header-image {
            width: 80px;
            height: 80px;
            object-fit: contain;
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.3));
        }
        
        .system-title {
            text-align: center;
            flex-grow: 1;
        }
        
        .system-title h1 {
            font-size: 2.5rem;
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            letter-spacing: 1px;
        }
        
        .system-title p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .dashboard-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .welcome-section {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .welcome-section h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .user-cards {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
        }
        
        .user-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            padding: 25px;
            width: 350px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .user-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 36px rgba(0, 0, 0, 0.3);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .user-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .user-info {
            margin-left: 15px;
        }
        
        .user-info h3 {
            font-size: 1.4rem;
            margin-bottom: 5px;
        }
        
        .user-info p {
            opacity: 0.8;
            font-size: 0.9rem;
        }
        
        .card-details {
            margin-top: 15px;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .detail-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .detail-label {
            font-weight: 600;
            opacity: 0.8;
        }
        
        .detail-value {
            font-weight: 500;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4a6491, #3a547e);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #3a547e, #2a446a);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-logout {
            background: rgba(231, 76, 60, 0.8);
            color: white;
        }
        
        .btn-logout:hover {
            background: rgba(192, 57, 43, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            width: 100%;
            margin-top: 20px;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #4a6491;
        }
        
        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .feature-card p {
            opacity: 0.8;
            font-size: 0.9rem;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            margin: 40px auto;
            padding: 0;
            width: 90%;
            max-width: 900px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            padding: 20px 30px;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .close-modal {
            font-size: 1.8rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: #fdbb2d;
        }
        
        .modal-tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.15);
            padding: 0 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: wrap;
        }
        
        .modal-tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .modal-tab.active {
            border-bottom: 3px solid #fdbb2d;
            color: #fdbb2d;
        }
        
        .modal-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #fdbb2d;
            box-shadow: 0 0 0 2px rgba(253, 187, 45, 0.3);
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .btn-cancel:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-submit {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }
        
        .btn-submit:hover {
            background: linear-gradient(135deg, #27ae60, #219653);
        }
        
        /* New styles for additional sections */
        .section-divider {
            margin: 30px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border-left: 4px solid #fdbb2d;
        }
        
        .section-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #fdbb2d;
        }
        
        .add-owner-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .add-owner-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .owner-entry {
            background: rgba(0, 0, 0, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .remove-owner {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(231, 76, 60, 0.8);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .remove-owner:hover {
            background: rgba(192, 57, 43, 0.9);
        }
        
        /* Database validation styles */
        .validation-error {
            color: #ff6b6b;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }
        
        .input-error {
            border-color: #ff6b6b !important;
            box-shadow: 0 0 0 2px rgba(255, 107, 107, 0.3) !important;
        }
        
        .required-field::after {
            content: " *";
            color: #ff6b6b;
        }
        
        .data-entry-guide {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }
        
        .data-entry-guide h4 {
            margin-bottom: 10px;
            color: #3498db;
        }
        
        .data-entry-guide ol {
            padding-left: 20px;
        }
        
        .data-entry-guide li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .dropdown-options {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            position: absolute;
            z-index: 1000;
            width: 100%;
            display: none;
        }
        
        .dropdown-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .dropdown-option:hover {
            background: rgba(52, 152, 219, 0.3);
        }
        
        .dropdown-container {
            position: relative;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .system-title h1 {
                font-size: 2rem;
            }
            
            .header-image {
                width: 60px;
                height: 60px;
            }
            
            .user-card {
                width: 100%;
            }
            
            .modal-content {
                width: 95%;
                margin: 20px auto;
            }
            
            .modal-tabs {
                flex-wrap: wrap;
            }
            
            .modal-tab {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }
        
        .watermark {
            position: fixed;
            bottom: 20px;
            right: 20px;
            opacity: 0.1;
            font-size: 5rem;
            font-weight: 800;
            pointer-events: none;
            z-index: -1;
        }
        
        /* File upload styling */
        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }
        
        .file-upload-btn {
            background: rgba(0, 0, 0, 0.2);
            color: white;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .file-upload-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-name {
            margin-top: 5px;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Status messages */
        .status-message {
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .status-success {
            background-color: rgba(46, 204, 113, 0.2);
            border: 1px solid rgba(46, 204, 113, 0.5);
            color: #2ecc71;
        }
        
        .status-error {
            background-color: rgba(231, 76, 60, 0.2);
            border: 1px solid rgba(231, 76, 60, 0.5);
            color: #e74c3c;
        }
        
        .status-info {
            background-color: rgba(52, 152, 219, 0.2);
            border: 1px solid rgba(52, 152, 219, 0.5);
            color: #3498db;
        }
        
        .status-warning {
            background-color: rgba(241, 196, 15, 0.2);
            border: 1px solid rgba(241, 196, 15, 0.5);
            color: #f1c40f;
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #fff;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Instructions styling */
        .instructions {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #fdbb2d;
        }
        
        .instructions h4 {
            margin-bottom: 10px;
            color: #fdbb2d;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .image-url-container {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .image-url-container input {
            background: rgba(0, 0, 0, 0.3);
        }
        
        /* Map container for boundary drawing */
        .map-container {
            height: 300px;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .map-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .map-btn {
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            cursor: pointer;
        }
        
        .map-btn:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        
        /* Image preview styling */
        .image-preview {
            margin-top: 15px;
            text-align: center;
            display: none;
        }
        
        .image-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .image-url-display {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            word-break: break-all;
        }
        
        .copy-url-btn {
            margin-top: 8px;
            padding: 5px 10px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            cursor: pointer;
        }
        
        .copy-url-btn:hover {
            background: rgba(0, 0, 0, 0.4);
        }
        
        .polygon-format-note {
            background: rgba(253, 187, 45, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 3px solid #fdbb2d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-images">
            <img src="liberiamap1.PNG" alt="Liberia Map" class="header-image">
        </div>
        
        <div class="system-title">
            <h1>LIBERIA LAND LOCK SYSTEM</h1>
            <p>Secure Land Management Portal</p>
        </div>
        
        <div class="header-images">
            <img src="liberiaseal.PNG" alt="Liberia Seal" class="header-image">
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="welcome-section">
            <h2>Welcome to Your Dashboard</h2>
            <p>You have successfully logged in to the secure portal</p>
        </div>
        
        <div class="user-cards">
            <div class="user-card">
                <div class="card-header">
                    <img id="userImage" src="" alt="User Image" class="user-image">
                    <div class="user-info">
                        <h3 id="userName">Loading...</h3>
                        <p id="userRole">Registered User</p>
                    </div>
                </div>
                
                <div class="card-details">
                    <div class="detail-item">
                        <span class="detail-label">DSSN:</span>
                        <span class="detail-value" id="userDSSN">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Email:</span>
                        <span class="detail-value" id="userEmail">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">User ID:</span>
                        <span class="detail-value" id="userId">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value" style="color: #2ecc71;">Verified</span>
                    </div>
                </div>
            </div>
            
            <div class="user-card">
                <div class="card-header">
                    <div class="user-info">
                        <h3>System Information</h3>
                        <p>Land Lock Portal</p>
                    </div>
                </div>
                
                <div class="card-details">
                    <div class="detail-item">
                        <span class="detail-label">Last Login:</span>
                        <span class="detail-value" id="lastLogin">Today</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Account Created:</span>
                        <span class="detail-value" id="accountCreated">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Access Level:</span>
                        <span class="detail-value">Standard</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Session Active:</span>
                        <span class="detail-value" style="color: #2ecc71;">Yes</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <h3>Land Records</h3>
                <p>Access and manage land ownership records and documents</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-file-contract"></i>
                </div>
                <h3>Documents</h3>
                <p>View and download official land documents and certificates</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>Search Portal</h3>
                <p>Search through land records and ownership information</p>
            </div>
            
            <div class="feature-card" id="landRegistrationCard">
                <div class="feature-icon">
                    <i class="fas fa-landmark"></i>
                </div>
                <h3>Land Registration</h3>
                <p>Register new land parcels, owners, and survey information</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Security</h3>
                <p>Advanced security measures to protect land data</p>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn btn-primary">
                <i class="fas fa-cog"></i> Settings
            </button>
            <button class="btn btn-primary">
                <i class="fas fa-question-circle"></i> Help
            </button>
            <button id="logoutBtn" class="btn btn-logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>
    
    <!-- Land Registration Modal -->
    <div id="landRegistrationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Land Registration System</h2>
                <span class="close-modal">&times;</span>
            </div>
            
            <div class="modal-tabs">
                <div class="modal-tab active" data-tab="person">Person</div>
                <div class="modal-tab" data-tab="land-parcel">Land Parcel</div>
                <div class="modal-tab" data-tab="land-ownership">Land Ownership</div>
                <div class="modal-tab" data-tab="document">Documents</div>
            </div>
            
            <div class="modal-body">
                <!-- Data Entry Guide -->
                <div class="data-entry-guide">
                    <h4><i class="fas fa-info-circle"></i> Data Entry Order</h4>
                    <ol>
                        <li><strong>Persons</strong> must be registered first (as Landowner, Surveyor, or Both)</li>
                        <li>Then register <strong>Land Parcels</strong> (requires Surveyor DSSN)</li>
                        <li>Finally establish <strong>Land Ownership</strong> (requires Owner DSSN and Parcel ID)</li>
                        <li>Upload supporting <strong>Documents</strong> for land ownership claims</li>
                    </ol>
                </div>
                
                <!-- Person Form -->
                <div id="person" class="tab-content active">
                    <div class="instructions">
                        <h4><i class="fas fa-info-circle"></i> Instructions</h4>
                        <p>Register a person first. This person can be a Landowner, Surveyor, or Both. All fields marked with * are required.</p>
                    </div>
                    
                    <form id="personForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="person-dssn" class="required-field">DSSN</label>
                                <input type="text" id="person-dssn" required>
                                <div class="validation-error" id="person-dssn-error">DSSN is required and must be unique</div>
                            </div>
                            <div class="form-group">
                                <label for="person-first-name" class="required-field">First Name</label>
                                <input type="text" id="person-first-name" required>
                                <div class="validation-error" id="person-first-name-error">First name is required</div>
                            </div>
                            <div class="form-group">
                                <label for="person-last-name" class="required-field">Last Name</label>
                                <input type="text" id="person-last-name" required>
                                <div class="validation-error" id="person-last-name-error">Last name is required</div>
                            </div>
                            <div class="form-group">
                                <label for="person-dob">Date of Birth</label>
                                <input type="date" id="person-dob">
                            </div>
                            <div class="form-group">
                                <label for="person-place-of-birth">Place of Birth</label>
                                <input type="text" id="person-place-of-birth">
                            </div>
                            <div class="form-group">
                                <label for="person-address">Address</label>
                                <textarea id="person-address" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="person-phone">Phone Number</label>
                                <input type="tel" id="person-phone">
                            </div>
                            <div class="form-group">
                                <label for="person-role" class="required-field">Role</label>
                                <select id="person-role" required>
                                    <option value="">Select Role</option>
                                    <option value="Landowner">Landowner</option>
                                    <option value="Surveyor">Surveyor</option>
                                    <option value="Both">Both (Landowner and Surveyor)</option>
                                </select>
                                <div class="validation-error" id="person-role-error">Role is required</div>
                            </div>
                            <div class="form-group">
                                <label for="person-license">License ID (for Surveyors)</label>
                                <input type="text" id="person-license">
                            </div>
                            <div class="form-group">
                                <label for="person-image">Person Image</label>
                                <div class="file-upload">
                                    <div class="file-upload-btn">
                                        <span>Choose File</span>
                                        <i class="fas fa-upload"></i>
                                        <input type="file" id="person-image" class="file-upload-input" accept="image/*">
                                    </div>
                                    <div class="file-name" id="person-image-name">No file chosen</div>
                                </div>
                                <div class="image-preview" id="person-image-preview">
                                    <img id="person-preview-img" src="" alt="Image preview">
                                    <div class="image-url-display" id="person-image-url-display">
                                        <p>Image URL will appear here after upload</p>
                                        <button type="button" class="copy-url-btn" id="copy-person-url">
                                            <i class="fas fa-copy"></i> Copy URL
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="person-image-url">Image URL</label>
                                <div class="image-url-container">
                                    <input type="text" id="person-image-url" placeholder="https://storage.googleapis.com/liblandlock/">
                                    <small>Enter the full image URL from Google Cloud Storage</small>
                                </div>
                            </div>
                        </div>
                        
                        <div id="personStatus"></div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-cancel">Cancel</button>
                            <button type="submit" class="btn btn-submit">
                                <span id="personSubmitText">Register Person</span>
                                <span id="personSpinner" class="spinner" style="display: none;"></span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Land Parcel Form -->
                <div id="land-parcel" class="tab-content">
                    <div class="instructions">
                        <h4><i class="fas fa-info-circle"></i> Instructions</h4>
                        <p>Fill out all required fields to register a new land parcel. The parcel ID will be automatically generated by the system.</p>
                        <p>For the boundary, either draw on the map or enter the polygon coordinates manually in WKT format: POLYGON((long lat, long lat, ...))</p>
                    </div>
                    
                    <!-- Map container for boundary drawing -->
                    <div class="map-container" id="map"></div>
                    <div class="map-actions">
                        <button type="button" class="map-btn" id="drawPolygonBtn">
                            <i class="fas fa-draw-polygon"></i> Draw Boundary
                        </button>
                        <button type="button" class="map-btn" id="clearPolygonBtn">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                    
                    <form id="landParcelForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="county" class="required-field">County</label>
                                <select id="county" required>
                                    <option value="">Select County</option>
                                    <option value="Bomi">Bomi</option>
                                    <option value="Bong">Bong</option>
                                    <option value="Gbarpolu">Gbarpolu</option>
                                    <option value="Grand Bassa">Grand Bassa</option>
                                    <option value="Grand Cape Mount">Grand Cape Mount</option>
                                    <option value="Grand Gedeh">Grand Gedeh</option>
                                    <option value="Grand Kru">Grand Kru</option>
                                    <option value="Lofa">Lofa</option>
                                    <option value="Margibi">Margibi</option>
                                    <option value="Maryland">Maryland</option>
                                    <option value="Montserrado">Montserrado</option>
                                    <option value="Nimba">Nimba</option>
                                    <option value="Rivercess">Rivercess</option>
                                    <option value="River Gee">River Gee</option>
                                    <option value="Sinoe">Sinoe</option>
                                </select>
                                <div class="validation-error" id="county-error">County is required</div>
                            </div>
                            <div class="form-group">
                                <label for="postal-code">Postal Code</label>
                                <select id="postal-code">
                                    <option value="">Select Postal Code</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="area-name" class="required-field">Area Name</label>
                                <input type="text" id="area-name" required>
                                <div class="validation-error" id="area-name-error">Area name is required</div>
                            </div>
                            <div class="form-group">
                                <label for="plot-number" class="required-field">Plot Number</label>
                                <input type="text" id="plot-number" required>
                                <div class="validation-error" id="plot-number-error">Plot number is required</div>
                            </div>
                            <div class="form-group">
                                <label for="date-surveyed" class="required-field">Date Surveyed</label>
                                <input type="date" id="date-surveyed" required>
                                <div class="validation-error" id="date-surveyed-error">Date surveyed is required</div>
                            </div>
                            <div class="form-group">
                                <label for="surveyor-dssn" class="required-field">Surveyor DSSN</label>
                                <div class="dropdown-container">
                                    <input type="text" id="surveyor-dssn" list="surveyor-dssn-list" required>
                                    <div class="validation-error" id="surveyor-dssn-error">Valid Surveyor DSSN is required</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="boundary" class="required-field">Boundary Polygon (WKT Format)</label>
                                <textarea id="boundary" rows="4" placeholder="POLYGON((-10.617312 6.450804,-10.615312 6.450804,-10.615312 6.448804,-10.617312 6.448804,-10.617312 6.450804))" required></textarea>
                                <div class="validation-error" id="boundary-error">Valid polygon is required</div>
                                <div class="polygon-format-note">
                                    <strong>Format:</strong> POLYGON((longitude1 latitude1, longitude2 latitude2, longitude3 latitude3, ...))
                                </div>
                                <button type="button" class="map-btn" id="verifyBoundaryBtn" style="margin-top: 10px;">
                                    <i class="fas fa-map"></i> Show on Map
                                </button>
                            </div>
                        </div>
                        
                        <div id="landParcelStatus"></div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-cancel">Cancel</button>
                            <button type="submit" class="btn btn-submit">
                                <span id="landParcelSubmitText">Register Land Parcel</span>
                                <span id="landParcelSpinner" class="spinner" style="display: none;"></span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Land Ownership Form -->
                <div id="land-ownership" class="tab-content">
                    <div class="instructions">
                        <h4><i class="fas fa-info-circle"></i> Instructions</h4>
                        <p>Establish ownership relationships between land parcels and owners. You can add multiple owners for the same parcel.</p>
                    </div>
                    
                    <form id="landOwnershipForm">
                        <div class="form-group">
                            <label for="ownership-parcel-id" class="required-field">Parcel ID</label>
                            <div class="dropdown-container">
                                <input type="number" id="ownership-parcel-id" list="parcel-id-list" required>
                                <div class="validation-error" id="ownership-parcel-id-error">Valid Parcel ID is required</div>
                            </div>
                        </div>
                        
                        <div id="ownership-entries">
                            <div class="owner-entry">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="ownership-owner-dssn-1" class="required-field">Owner DSSN</label>
                                        <div class="dropdown-container">
                                            <input type="text" id="ownership-owner-dssn-1" list="owner-dssn-list" required>
                                            <div class="validation-error" id="ownership-owner-dssn-1-error">Valid Owner DSSN is required</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="remove-owner">&times;</div>
                            </div>
                        </div>
                        
                        <button type="button" class="add-owner-btn" id="add-owner">
                            <i class="fas fa-plus"></i> Add Another Owner
                        </button>
                        
                        <div id="landOwnershipStatus"></div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-cancel">Cancel</button>
                            <button type="submit" class="btn btn-submit">
                                <span id="landOwnershipSubmitText">Register Ownership</span>
                                <span id="landOwnershipSpinner" class="spinner" style="display: none;"></span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Document Form -->
                <div id="document" class="tab-content">
                    <div class="instructions">
                        <h4><i class="fas fa-info-circle"></i> Instructions</h4>
                        <p>Upload supporting documents for land ownership claims. Each document must be associated with an owner's DSSN.</p>
                    </div>
                    
                    <form id="documentForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="document-owner-dssn" class="required-field">Owner DSSN</label>
                                <div class="dropdown-container">
                                    <input type="text" id="document-owner-dssn" list="owner-dssn-list" required>
                                    <div class="validation-error" id="document-owner-dssn-error">Valid Owner DSSN is required</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="document-type" class="required-field">Document Type</label>
                                <select id="document-type" required>
                                    <option value="">Select Document Type</option>
                                    <option value="Probate_Court">Probate Court</option>
                                    <option value="LLA">Liberia Land Authority (LLA)</option>
                                    <option value="LRA">Liberia Revenue Authority (LRA)</option>
                                </select>
                                <div class="validation-error" id="document-type-error">Document type is required</div>
                            </div>
                            <div class="form-group">
                                <label for="document-file">Document File</label>
                                <div class="file-upload">
                                    <div class="file-upload-btn">
                                        <span>Choose File</span>
                                        <i class="fas fa-upload"></i>
                                        <input type="file" id="document-file" class="file-upload-input" accept="image/*,.pdf">
                                    </div>
                                    <div class="file-name" id="document-file-name">No file chosen</div>
                                </div>
                                <div class="image-preview" id="document-image-preview">
                                    <img id="document-preview-img" src="" alt="Document preview">
                                    <div class="image-url-display" id="document-image-url-display">
                                        <p>Document URL will appear here after upload</p>
                                        <button type="button" class="copy-url-btn" id="copy-document-url">
                                            <i class="fas fa-copy"></i> Copy URL
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="document-url">Document URL</label>
                                <div class="image-url-container">
                                    <input type="text" id="document-url" placeholder="https://storage.googleapis.com/liblandlock/">
                                    <small>Enter the full document URL from Google Cloud Storage</small>
                                </div>
                            </div>
                        </div>
                        
                        <div id="documentStatus"></div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-cancel">Cancel</button>
                            <button type="submit" class="btn btn-submit">
                                <span id="documentSubmitText">Upload Document</span>
                                <span id="documentSpinner" class="spinner" style="display: none;"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <div class="watermark">LLS</div>

    <!-- Global Datalists -->
    <datalist id="surveyor-dssn-list"></datalist>
    <datalist id="owner-dssn-list"></datalist>
    <datalist id="parcel-id-list"></datalist>

    <script>
        // County and postal code data
        const counties = [
            "Bomi", "Bong", "Gbarpolu", "Grand Bassa", "Grand Cape Mount", 
            "Grand Gedeh", "Grand Kru", "Lofa", "Margibi", "Maryland", 
            "Montserrado", "Nimba", "Rivercess", "River Gee", "Sinoe"
        ];

        const postalCodes = {
            "Montserrado": [
                { code: "10101", area: "BENTOL - BENSONVILLE - DISTRICT 1" },
                { code: "10102", area: "CAREYSBURG - CAREYSBURG - DISTRICT 1" },
                { code: "10103", area: "TODEE - TODEE - DISTRICT 1" },
                { code: "10104", area: "LOUISIANA - LOUISIANA - DISTRICT 1" },
                { code: "10201", area: "JOHNSONVILLE - JOHNSONVILLE - DISTRICT 2" },
                { code: "10202", area: "DOUBLE BRIDGE - SOMALIA DRIVE - DISTRICT 2" },
                { code: "10203", area: "JACOB TOWN - SOMALIA DRIVE - DISTRICT 2" },
                { code: "10204", area: "ZINC FACTORY - SOMALIA DRIVE - DISTRICT 2" },
                { code: "10205", area: "MOUNT BARCLAY - MOUNT BARCLAY - DISTRICT 2" },
                { code: "10301", area: "PIPELINE - PAYNESVILLE - DISTRICT 3" },
                { code: "10302", area: "MORRIS FARM - PAYNESVILLE - DISTRICT 3" },
                { code: "10303", area: "WOOD CAMP - PAYNESVILLE - DISTRICT 3" },
                { code: "10304", area: "NEEZOE - PAYNESVILLE - DISTRICT 3" },
                { code: "10401", area: "BARNARD FARM - PAYNESVILLE - DISTRICT 4" },
                { code: "10402", area: "OMEGA/KEMAH TOWN - PAYNESVILLE - DISTRICT 4" },
                { code: "10403", area: "PAYESVILLE JOE BAR - PAYNESVILLE - DISTRICT 4" },
                { code: "10404", area: "DUPORT ROAD - PAYNESVILLE - DISTRICT 4" },
                { code: "10501", area: "RED LIGHT - PAYNESVILLE - DISTRICT 5" },
                { code: "10502", area: "POLICE ACADEMY - PAYNESVILLE - DISTRICT 5" },
                { code: "10503", area: "BASSA TOWN - PAYNESVILLE - DISTRICT 5" },
                { code: "10504", area: "72ND - PAYNESVILLE - DISTRICT 5" },
                { code: "10505", area: "TOWN HALL - PAYNESVILLE - DISTRICT 5" },
                { code: "10506", area: "A.B TOLBERT ROAD - PAYNESVILLE - DISTRICT 5" },
                { code: "10507", area: "PAGOS ISLAND - PAYNESVILLE - DISTRICT 5" },
                { code: "10508", area: "SWANKAMORE - PAYNESVILLE - DISTRICT 5" },
                { code: "10601", area: "GSA ROAD ROCKVILLE - PAYNESVILLE - DISTRICT 6" },
                { code: "10602", area: "S.D COOPER ROAD - PAYNESVILLE - DISTRICT 6" },
                { code: "10603", area: "KPELLE TOWN - PAYNESVILLE - DISTRICT 6" },
                { code: "10604", area: "KING GRAY - PAYNESVILLE - DISTRICT 6" },
                { code: "10605", area: "ELWA - PAYNESVILLE - DISTRICT 6" },
                { code: "10606", area: "REHAB/BORBOR TOWN - PAYNESVILLE - DISTRICT 6" },
                { code: "10607", area: "KENDE-JAH - PAYNESVILLE - DISTRICT 6" },
                { code: "10608", area: "THINKER'S VILLAGE - PAYNESVILLE - DISTRICT 6" },
                { code: "10609", area: "BAPTIST SEMINARY - ROBERT'S FIELD HIGH WAY - DISTRICT 6" },
                { code: "10610", area: "WAMBA TOWN - ROBERT'S FIELD HIGH WAY - DISTRICT 6" },
                { code: "10701", area: "WEST POINT - WEST POINT TOWNSHIP - DISTRICT 7" },
                { code: "10702", area: "ROCK CRUSHER - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10703", area: "SNAPPER HILL - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10704", area: "MAMBA POINT - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10705", area: "U. N. DRIVE - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10706", area: "RANDALL/NEWPORT/LYNCH STREET - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10707", area: "CAREY/GURLEY/MECHLIN STREET - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10708", area: "BROAD/ASHMUN STREET - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10709", area: "BENSON/WARREN/PERRY/CLAY/JOHNSON STREET - CENTRAL MONROVIA - DISTRICT 7" },
                { code: "10801", area: "CROWN HILL - MONROVIA - DISTRICT 8" },
                { code: "10802", area: "SLIP WAY - MONROVIA - DISTRICT 8" },
                { code: "10803", area: "SONIWEIN - MONROVIA - DISTRICT 8" },
                { code: "10804", area: "BUZZI QUARTERS - MONROVIA - DISTRICT 8" },
                { code: "10805", area: "JALLAH TOWN - MONROVIA - DISTRICT 8" },
                { code: "10806", area: "CAPITAL HILL - MONROVIA - DISTRICT 8" },
                { code: "10807", area: "SINKOR (1ST - 12) STREET - MONROVIA - DISTRICT 8" },
                { code: "10901", area: "SINKOR (13 - 24) STREET - MONROVIA - DISTRICT 9" },
                { code: "10902", area: "NEW MATADI - MONROVIA - DISTRICT 9" },
                { code: "10903", area: "OLD MATADI - MONROVIA - DISTRICT 9" },
                { code: "10904", area: "LAKPAZEE - MONROVIA - DISTRICT 9" },
                { code: "10905", area: "FIAMA - MONROVIA - DISTRICT 9" },
                { code: "10906", area: "RAYMOND FIELD - MONROVIA - DISTRICT 9" },
                { code: "10907", area: "GBANGAYE TOWN - MONROVIA - DISTRICT 9" },
                { code: "10908", area: "AIRFIELD - MONROVIA - DISTRICT 9" },
                { code: "10909", area: "WROTO TOWN - MONROVIA - DISTRICT 9" },
                { code: "10910", area: "FISH MARKET - MONROVIA - DISTRICT 9" },
                { code: "11001", area: "KEY & DEATH HOLE - OLD ROAD - DISTRICT 10" },
                { code: "11002", area: "CATHOLIC HOSPITAL - OLD ROAD - DISTRICT 10" },
                { code: "11003", area: "DIVINE & TOGBA CAMP - OLD ROAD - DISTRICT 10" },
                { code: "11004", area: "NIPPAY TOWN - OLD ROAD - DISTRICT 10" },
                { code: "11005", area: "SMYTHE ROAD - OLD ROAD - DISTRICT 10" },
                { code: "11006", area: "CHUGBOR - OLD ROAD - DISTRICT 10" },
                { code: "11007", area: "GAYE TOWN COMMUNITY - OLD ROAD - DISTRICT 10" },
                { code: "11008", area: "TARR TOWN - OLD ROAD - DISTRICT 10" },
                { code: "11009", area: "YEKPEE TOWN - OLD ROAD - DISTRICT 10" },
                { code: "11010", area: "PEACE ISLAND - CONGO TOWN - DISTRICT 10" },
                { code: "11011", area: "CONGO TOWN - CONGO TOWN - DISTRICT 10" },
                { code: "11101", area: "CASSAVA HILL - CALDWELL TOWNSHIP - DISTRICT 11" },
                { code: "11102", area: "SAMUKAI TOWN - CALDWELL TOWNSHIP - DISTRICT 11" },
                { code: "11103", area: "DIXVILLE - DIXVILLE TOWNSHIP - DISTRICT 11" },
                { code: "11104", area: "CALDWELL - CALDWELL TOWNSHIP - DISTRICT 11" },
                { code: "11105", area: "KABA TOWN - BARDNERSVILLE TOWNSHIP - DISTRICT 11" },
                { code: "11106", area: "BEHWEIN COMMUNITY - BARDNERSVILLE TOWNSHIP - DISTRICT 11" },
                { code: "11107", area: "BARNESVILLE ESTATE - BARDNERSVILLE TOWNSHIP - DISTRICT 11" },
                { code: "11108", area: "GRASS FIELD - BARDNERSVILLE TOWNSHIP - DISTRICT 11" },
                { code: "11109", area: "DAY BREAK MOUTH OPEN - BARDNERSVILLE TOWNSHIP - DISTRICT 11" },
                { code: "11201", area: "JOHNSONVILLE ROAD - BARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11202", area: "CHICKEN SOUP FACTORY - GARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11203", area: "SHOE FACTORY - GARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11204", area: "MTA - GARDNERSVILLE TOWNSHIP -DISTRICT 12" },
                { code: "11205", area: "STEPHEN TOLBERT ESTATE - GARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11206", area: "RIVER VIEW - GARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11207", area: "KESSELLY BOULEVARD - GARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11208", area: "MANGROVE ISLAND - GARDNERSVILLE TOWnship - DISTRICT 12" },
                { code: "11209", area: "J.J.Y. SNOW HILL - GARDNERSVILLE TOWNSHIP - DISTRICT 12" },
                { code: "11301", area: "NEW GEORGIA - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11302", area: "ST. MICHEAL - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11303", area: "CHOCOLATE CITY - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11304", area: "IRON FACTORY - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11305", area: "SOS TRANSIT - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11306", area: "NEW GEORGIA ESTATE - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11307", area: "BASSA TOWN - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11308", area: "TOPOE VILLAGE - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11309", area: "BATTERY FACTORY - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11310", area: "FLAHN TOWN - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11311", area: "STOCKTON CREEK - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11312", area: "JAMAICA ROAD - NEW GEORGIA TOWNSHIP - DISTRICT 13" },
                { code: "11401", area: "FREE PORT COMMUNITY - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11402", area: "COW FACTORY - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11403", area: "STRUGGLE COMMUNITY - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11404", area: "HOPE COMMUNITY - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11405", area: "PEUGEOT GARAGE - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11406", area: "PAITY TOWN - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11407", area: "RIVER VIEW - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11408", area: "CLARA TOWN - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11409", area: "GIBLATA - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11410", area: "VIA TOWN - GARGLORH TOWNSHIP - DISTRICT 14" },
                { code: "11501", area: "LOGAN TOWN - GARGLORH TOWNSHIP - DISTRICT 15" },
                { code: "11502", area: "GBANDI TOWN - GARGLORH TOWNSHIP - DISTRICT 15" },
                { code: "11503", area: "ZINC CAMP - GARGLORH TOWNSHIP - DISTRICT 15" },
                { code: "11504", area: "ZONDO TOWN - GARGLORH TOWNSHIP - DISTRICT 15" },
                { code: "11505", area: "BLAMO TOWN - GARGLORH TOWNSHIP - DISTRICT 15" },
                { code: "11506", area: "KING PETER TOWN - GARGLORH TOWNSHIP - DISTRICT 15" },
                { code: "11601", area: "ST. PAUL BRIDGE - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11602", area: "TWEH FARM - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11603", area: "MONBOE TOWN - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11604", area: "LAGON - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11605", area: "NEW KRU TOWN - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11606", area: "FUNDAYE - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11607", area: "DUALA MARKET - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11608", area: "NYUANTOWN - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11609", area: "BONG MINES BRIDGE - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11610", area: "POPO BEACH - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11611", area: "POINT FOUR (4) - BOROUGH OF KRU TOWN - DISTRICT 16" },
                { code: "11701", area: "GBARVEAH - ARTHINGTON - DISTRICT 17" },
                { code: "11702", area: "BONOWAH - ARTHINGTON - DISTRICT 17" },
                { code: "11703", area: "DINEEKON - ARTHINGTON - DISTRICT 17" },
                { code: "11704", area: "CENTRAL ARTHINGTON - ARTHINGTON - DISTRICT 17" },
                { code: "11705", area: "MILLSBURG - ARTHINGTON - DISTRICT 17" },
                { code: "11706", area: "LUNEH - CLAY ASHLAND - DISTRICT 17" },
                { code: "11707", area: "BARCON - CLAY ASHLAND - DISTRICT 17" },
                { code: "11708", area: "KAIKPU - CLAY ASHLAND - DISTRICT 17" },
                { code: "11709", area: "VIRGINIA - VIRGINIA TOWNSHIP - DISTRICT 17" },
                { code: "11710", area: "SUNDUFU - CHEESEMANBURG TOWNSHIP - DISTRICT 17" },
                { code: "11711", area: "CHEESEMANBURG - CHEESEMANBURG TOWNSHIP - DISTRICT 17" },
                { code: "11712", area: "BREWERVILLE - BREWERVILLE - DISTRICT 17" },
                { code: "11713", area: "ROYESVILLE - ROYESVILLE TOWNSHIP - DISTRICT 17" },
                { code: "11714", area: "ACROSS THE CREEK - ROYESVILLE TOWNSHIP - DISTRICT 17" }
              ],
              "Bong": [
                { code: "30101", area: "DOE - DOE - KOKOYAH" },
                { code: "30102", area: "NANGBO - NANGBO - KOKOYAH" },
                { code: "30103", area: "TIKPAH - TIKPAH - TUKPAHBLEE" },
                { code: "30104", area: "MELEKEI - MELEKEI - TUKPAHBLEE" },
                { code: "30105", area: "DEAN TOWN - DEAN - BEINSEN" },
                { code: "30106", area: "U-LA - U-LA - BEINSEN" },
                { code: "30107", area: "BEHWEE - BEHWEE - BEINSEN" },
                { code: "30108", area: "DUTA - DUTA - KPAAI" },
                { code: "30109", area: "WOLATA - WOLATA - KPAAI" },
                { code: "30201", area: "TAMAY TA - TAMAY TA - JORQUELLEH 2" },
                { code: "30202", area: "GBENEQUELLEH - GBENEQUELLEH - JORQUELLEH 2" },
                { code: "30203", area: "JANKPAYAH - JANKPAYAH - JORQUELLEH 2" },
                { code: "30204", area: "SAMAY - SAMAY - JORQUELLEH 2" },
                { code: "30205", area: "MANO-WEASUE - MANOWEASUE - JORQUELLLEH 2" },
                { code: "30206", area: "JANYEA - JANYEA - JORQUELLEH 2" },
                { code: "30207", area: "KOLLIETA-MULA - KOLLIETA-MULA - JORQUELLEH 2" },
                { code: "30301", area: "MELEKEI - GBARNGA - JORQUELLEH 1" },
                { code: "30302", area: "CAMP TUBMAN BARRACK - GBARNGA - JORQUELLEH 1" },
                { code: "30303", area: "RUBBER FACTORY - GBARNGA - JORQUELLEH 1" },
                { code: "30304", area: "LOFA ROAD - GBARNGA - JORQUELLEH 1" },
                { code: "30305", area: "IRON GATE - GBARNGA - JORQUELLEH 1" },
                { code: "30306", area: "OLD IRON GATE - GBARNGA - JORQUELLEH 1" },
                { code: "30307", area: "BROOKLYN - GBARNGA - JORQUELLEH 1" },
                { code: "30308", area: "SUGAR HILL - GBARNGA - JORQUELLEH 1" },
                { code: "30309", area: "FAR EAST - GBARNGA - JORQUELLEH 1" },
                { code: "30310", area: "BROAD STREET - GBARNGA - JORQUELLEH 1" },
                { code: "30311", area: "LELEKPAYEA - GBARNGA - JORQUELLEH 1" },
                { code: "30312", area: "LPMC ROAD - GBARNGA - JORQUELLLEH 1" },
                { code: "30313", area: "GANTA PARKING - GBARNGA - JORQUELLEH 1" },
                { code: "30314", area: "COUNTY FIELD - GBARNGA - JORQUELLEH 1" },
                { code: "30315", area: "WONGBA - WONGBA - JORQUELLEH 1" },
                { code: "30316", area: "GBAOTA - GBAOTA - JORQUELLEH 1" },
                { code: "30317", area: "KPANYAH - KPANYAH - JORQUELLEH 1" },
                { code: "30318", area: "GBARMUE - GBARMUE - JORQUELLEH 1" },
                { code: "30401", area: "MOAGAN - MOAGAN - PANTA" },
                { code: "30402", area: "JORWAH - JORWAH - PANTA" },
                { code: "30403", area: "BELEFANAI - BELEFANAI - ZOTA" },
                { code: "30404", area: "YOWEE - YOWEE - ZOTA" },
                { code: "30405", area: "GOU - GOU - SANOYEA" },
                { code: "30406", area: "GBONOTA - GBONOTA - SANOYEA" },
                { code: "30501", area: "SKT - SKT - SUAKOKO" },
                { code: "30502", area: "CUTTINGTON - PHEBE - SUAKOKO" },
                { code: "30503", area: "PHEBE - PHEBE - SUAKOKO" },
                { code: "30504", area: "SINYEA - SINYEA - SUAKOKO" },
                { code: "30505", area: "GEAMUE - GEAMUE - SUAKOKO" },
                { code: "30506", area: "DULIMUE - DULIMUE - SUAKOKO" },
                { code: "30507", area: "GOKAI - GOKAI - SUAKOKO" },
                { code: "30601", area: "GBARTALA - GBARTALA - YEALLLEQUELLEH" },
                { code: "30602", area: "PALALA - PALALA - YEALLEQUELLEH" },
                { code: "30603", area: "FENUTOLI - FENUTOLI - YEALLEQUELLEH" },
                { code: "30604", area: "GARYEA - GARYEA - YEALLEQUELLEH" },
                { code: "30605", area: "GLENKORMAH - GLENKORMAH - YEALLEQUELLEH" },
                { code: "30701", area: "SALALA - SALALA - SALALA" },
                { code: "30702", area: "TOTOTA - TOTOTA - SALALA" },
                { code: "30703", area: "POPOTA - POPOTA - FUAMAH" },
                { code: "30704", area: "DOBLI ISLAND - DOBLI ISLAND - FUAMAH" }
              ],
              "Grand Bassa": [
                { code: "40101", area: "LLOYDSVILLE - KPORKON - DISTRICT 1" },
                { code: "40102", area: "KPALAWRU - KPORKON - DISTRICT 1" },
                { code: "40103", area: "ZEON - ZEON - DISTRICT 1" },
                { code: "40104", area: "ZUZOHN - ZUZOHN - DISTRICT 1" },
                { code: "40105", area: "EDINA - EDINA - DISTRICT 1" },
                { code: "40106", area: "LITTLE BASSA - EDINA - DISTRICT 1" },
                { code: "40107", area: "OWENSGROOVE - OWENSGROOVE - DISTRICT 1" },
                { code: "40201", area: "GEEHGBAHN - GEEHBAHN - DISTRICT 2" },
                { code: "40202", area: "YEABLOE - YEABLOE - DISTRICT 2" },
                { code: "40203", area: "ST. JOHN - ST. JOHN - DISTRICT 2" },
                { code: "40204", area: "HARTFORD - HARTFORD - DISTRICT 2" },
                { code: "40301", area: "BLEEWEIN TOWN - BUCHANAN - DISTRICT 3" },
                { code: "40302", area: "SANWIN TOWN - BUCHANAN - DISTRICT 3" },
                { code: "40303", area: "BARCONI - BUCHANAN - DISTRICT 3" },
                { code: "40304", area: "UPPER BUCHANAN - BUCHANAN - DISTRICT 3" },
                { code: "40305", area: "FOUR HOUSES - BUCHANAN - DISTRICT 3" },
                { code: "40306", area: "CENTRAL BUCHANAN - BUCHANAN - DISTRICT 3" },
                { code: "40307", area: "LOWER BUCHANAN - BUCHANAN - DISTRICT 3" },
                { code: "40308", area: "FAIR GROUND - BUCHANAN - DISTRICT 3" },
                { code: "40309", area: "GOD BLESS YOU HILL - BUCHANAN - DISTRICT 3" },
                { code: "40310", area: "WATCO CAMP - LOWER HARLANDSVILLE - DISTRICT 3" },
                { code: "40311", area: "NEW BUCHANAN - LOWER HARLANDSVILLE - DISTRICT 3" },
                { code: "40312", area: "JECKO TOWN - LOWER HARLANDSVILLE - DISTRICT 3" },
                { code: "40313", area: "EEKREEN - KEEKREEN - DISTRICT 3" },
                { code: "40314", area: "OWN YOUR OWN - KEEKREEN - DISTRICT 3" },
                { code: "40315", area: "CORN FAM - BUCHANAN - DISTRICT 3" },
                { code: "40316", area: "SUGAR CANE FARM - BUCHANAN - DISTRICT 3" },
                { code: "40317", area: "BIAFRA - BUCHANAN - DISTRICT 3" },
                { code: "40318", area: "FANTI TOWN - BUCHANAN - DISTRICT 3" },
                { code: "40319", area: "DIRT HOLE - BUCHANAN - DISTRICT 3" },
                { code: "40320", area: "SAYEPUE HILL - BUCHANAN - DISTRICT 3" },
                { code: "40321", area: "SUGAR HILL - BUCHANAN - DISTRICT 3" },
                { code: "40401", area: "GORBLEE - GORBLEE - DISTRICT 4" },
                { code: "40402", area: "BLEZEE - BLEZEE - DISTRICT 4" },
                { code: "40403", area: "DEEGBAH - BLEEZEE - DISTRICT 4" },
                { code: "40404", area: "ZONDO MISSION - ZONDO MISSION - DISTRICT 4" },
                { code: "40405", area: "NYUEIN_WEIN - NYUEIN_WEIN - DISTRICT 4" },
                { code: "40501", area: "WHROGBA - WHROGBA - DISTRICT 5" },
                { code: "40502", area: "DOEGBAHN_GLAYDOR - DOEGBAHN_GLAYDOR - DISTRICT 5" },
                { code: "40503", area: "KPOEWEIN - KPOEWEIN - DISTRICT 5" },
                { code: "40504", area: "PALM BAY - PALM BAY - DISTRICT 5" }
              ],
              "Margibi": [
                { code: "20101", area: "R2 COMMUNITY - DUAZON - MAMBAH KABA" },
                { code: "20102", area: "ROCK INTERNATIONAL - DUAZON - MAMBAH KABA" },
                { code: "20103", area: "DUAZON - DUAZON - MAMBAH KABA" },
                { code: "20104", area: "EBK BARRACKS - SCHIEFFLIN - MAMBAH KABA" },
                { code: "20105", area: "BOYS TOWN - SCHIEFFLIN - MAMBAH KABA" },
                { code: "20106", area: "SCHIEFFLIN - SCHIEFFLIN - MAMBAH KABA" },
                { code: "20107", area: "ELLEN ESTATE - SCHIEFFLIN - MAMBAH KABA" },
                { code: "20108", area: "MARSHALL - MARSHALL - MAMBAH KABA" },
                { code: "20109", area: "FARMINGTON - FARMINGTON - MAMBAH KABA" },
                { code: "20110", area: "KARFEAH - KARFEAH - MAMBAH KABA" },
                { code: "20111", area: "LOONGAYE - LOONGAYE - MAMBAH KABA" },
                { code: "20112", area: "ZOEDUEHN - ZOEDUEHN - MAMBAH KABA" },
                { code: "20113", area: "GARNOE - GARNOE - MAMBAH KABA" },
                { code: "20114", area: "GARZON - FARMINGTON - MAMBAH KABA" },
                { code: "20115", area: "LLOYDSVILLE CENTRAL - LOYDSVILLE - MAMBAH KABA" },
                { code: "20201", area: "UNIFICATION TOWN - UNIFICATION - MAMBAH KABA" },
                { code: "20202", area: "CENTRAL CHARLESVILLE - FARMINGTON - MAMBAH KABA" },
                { code: "20203", area: "DOLO TOWN - UNIFICATION - MAMBAH KABA" },
                { code: "20204", area: "COTTON TREE - UNIFICATION - MAMBAH KABA" },
                { code: "20205", area: "HARBEL - UNIFICATION - MAMBAH KABA" },
                { code: "20206", area: "GARZON WEST - FARMINTON - MAMBAH KABA" },
                { code: "20301", area: "DIVISION 25 - DIVISION 25 - FIRESTONE" },
                { code: "20302", area: "DIVISION 29 - CAMP 2 - FIRESTONE" },
                { code: "20303", area: "DIVISION 36 - CAMp 3 - FIRESTONE" },
                { code: "20304", area: "DIVISION 14 - CAMP 3 - FIRESTONE" },
                { code: "20305", area: "DIVISION 38 - OLD CAMP - FIRESTONE" },
                { code: "20306", area: "DIVISION 43 - CAMp - FIRESTONE" },
                { code: "20307", area: "DIVISION 24 - CAMP - FIRESTONE" },
                { code: "20308", area: "DIVISION 27 - FIRESTONE - FIRESTONE" },
                { code: "20309", area: "DU SIDE VILLAGE - DU SIDE - FIRESTONE" },
                { code: "20401", area: "DENNISVILLE COMMUNITY - KAKATA - KAKATA" },
                { code: "20402", area: "MENDE TOWN - KAKATA - KAKATA" },
                { code: "20403", area: "KRTTI - KAKATA - KAKATA" },
                { code: "20404", area: "BWI - KAKATA - KAKATA" },
                { code: "20405", area: "NANCY DOE - KAKATA - KAKATA" },
                { code: "20406", area: "ST. CHRISTOPHER - KAKATA - KAKATA" },
                { code: "20407", area: "CH RENNIE - KAKATA - KAKATA" },
                { code: "20408", area: "WHENNEY TOWN - KAKATA - KAKATA" },
                { code: "20409", area: "SUE TOWN - KAKATA - KAKATA" },
                { code: "20410", area: "BARCLAY - KAKATA - KAKATA" },
                { code: "20411", area: "MULA - KAKATA - KAKATA" },
                { code: "20412", area: "GBOYORMU - KAKATA - KAKATA" },
                { code: "20413", area: "JOHN HILL - KAKATA - KAKATA" },
                { code: "20414", area: "MORRIS FARM - KAKATA - KAKATA" },
                { code: "20501", area: "GALILA - GALILA - GIBI" },
                { code: "20502", area: "MASSAQUOI - MASSAQUOI - GIBI" },
                { code: "20503", area: "KPENEWEIN - KPENEWEIN - GIBI" },
                { code: "20504", area: "FAHNJACK - FAHNJACK - GIBI" }
              ],
              "Nimba": [
                { code: "50101", area: "NENGBE - NENGBE - GARR-BAIN" },
                { code: "50102", area: "GBUYEE - GBUYEE - GARR-BAIN" },
                { code: "50103", area: "TONGLAYWIN - TONGLAYWIN - GARR-BAIN" },
                { code: "50104", area: "DORMAH PA - DORMAH PA - GARR-BAIN" },
                { code: "50105", area: "YELEKORYEE - YELEKORYEE - GARR-BAIN" },
                { code: "50106", area: "GUINEA BORDER - GBUYEE - GARR-BAIN" },
                { code: "50107", area: "CITY VIEW - GANTA - GARR-BAIN" },
                { code: "50108", area: "ZOKESEH - GANTA - GARR-BAIN" },
                { code: "50109", area: "GEOLANDO - GANTA - GARR-BAIN" },
                { code: "50110", area: "TONGLAYWIN - GANTA - GARR-BAIN" },
                { code: "50111", area: "HOPE VILLAGE - GANTA - GARR-BAIN" },
                { code: "50112", area: "BLAGAYS - GANTA - GARR-BAIN" },
                { code: "50113", area: "DEAKEHMEIN - GANTA - GARR-BAIN" },
                { code: "50114", area: "GBUYEE - GANTA - GARR-BAIN" },
                { code: "50115", area: "J.W. PEARSON - GANTA - GARR-BAIN" },
                { code: "50116", area: "TOKAY HILL - GANTA - GARR-BAIN" },
                { code: "50117", area: "GLENYILUU - GANTA - GARR-BAIN" },
                { code: "50118", area: "REHAB TOWN - GANTA - GARR-BAIN" },
                { code: "50119", area: "LPMC - GANTA - GARR-BAIN" },
                { code: "50201", area: "GBOA - GBOA - SANNIQUELLIE-MAHN" },
                { code: "50202", area: "TONWEE - TONWEE - SANNIQUELLIE-MAHN" },
                { code: "50203", area: "SEHYI KIMPA - SEHYI KIMPA - SANNIQUELLIE-MAHN" },
                { code: "50204", area: "ZOLOWEE - ZOLOWEE - SANNIQUELLIE-MAHN" },
                { code: "50205", area: "NEIPA COMMUNITY - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50206", area: "RED CROSS - SANNIQUEELLIE - SANNIQUELLIE-MAHN" },
                { code: "50207", area: "BADIO TOWN - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50208", area: "BAHA'I LOCAL - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50209", area: "ARS COMPOUND - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50210", area: "ST. MARRY HOSPITAL - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50211", area: "JOY FM - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50212", area: "NIMBA UNIVERSITY - SANNIQUELLIE - SANNIQUELLIE-MAHN" },
                { code: "50213", area: "GBAYEE - GBAYEE - YARPEA-MAHN" },
                { code: "50214", area: "GOTONWIN - GOTONWIN - YARPEA-MAHN" },
                { code: "50215", area: "BOAPLAY - BOAPLAY - YARPEA-MAHN" },
                { code: "50216", area: "MAO - MAO - YARPEA-MAHN" },
                { code: "50301", area: "ZOR KIALAY - ZOR KIALAY - GBEHLAY-GEH" },
                { code: "50302", area: "KARNPLAY - KARNPLAY - GBEHLAY-GEH" },
                { code: "50303", area: "DULAY - DULAY - GBEHLAY-GEH" },
                { code: "50304", area: "ZUALAY - ZUALAY - GBEHLAY-GEH" },
                { code: "50305", area: "GBAPA - GBAPA - GBEHLAY-GEH" },
                { code: "50306", area: "NEW YEKEPA - NEW YEKEPA - YARMEIN" },
                { code: "50307", area: "BONLA - BONLA - YARMEIN" },
                { code: "50401", area: "KORSEIN - KORSEIN - GBOR" },
                { code: "50402", area: "WEHPLAY - WEHPLAY - GBOR" },
                { code: "50403", area: "SAIPLAY - SAIPLAY - GBOR" },
                { code: "50404", area: "PAYEE - PAYEE - GBOR" },
                { code: "50405", area: "RLEKPORLAY - RLEKPORLAY - GBOR" },
                { code: "50406", area: "BAYLEHGLAY - BAYLEHGLAY - GBOR" },
                { code: "50407", area: "KPAIRPLAY - KPAIRPLAY - TWAN RIVER" },
                { code: "50408", area: "KEHLOW - KEHLOW - TWAN RIVER" },
                { code: "50409", area: "BEH - BEH - TWAN RIVER" },
                { code: "50410", area: "VAYENGLAY - VAYENGLAY - TWAN RIVER" },
                { code: "50411", area: "SENLAY - SENLAY - TWAN RIVER" },
                { code: "50412", area: "GBONWEA - GBONWEA - TWAN RIVER" },
                { code: "50413", area: "MAHDIAPLAY - MAHDIAPLAY - TWAN RIVER" },
                { code: "50414", area: "GARPLAY - GARPLAY - TWAN RIVER" },
                { code: "50415", area: "DUAH - DUAH - TWAN RIVER" },
                { code: "50416", area: "GBEI BONNAH - GBEI BONNAH - TWAN RIVER" },
                { code: "50417", area: "GBLANLAY - GBLANLAY - TWAN RIVER" },
                { code: "50418", area: "GBEI VONWEA - GBEI VONWEA - TWAN RIVER" },
                { code: "50419", area: "GBORPLAY - GBORPLAY - TWAN RIVER" },
                { code: "50420", area: "LONTUO - LONTUO - TWAN RIVER" },
                { code: "50421", area: "BONGARPLAY - BONGARPLAY - TWAN RIVER" },
                { code: "50501", area: "BEATATUO - BEATATUO - BUU-YAO" },
                { code: "50502", area: "BEEPLAY - BEEPLAY - BUU-YAO" },
                { code: "50503", area: "GLARLAY - GLARLAY - BUU-YAO" },
                { code: "50504", area: "TIAPLAY - TIAPLAY - BUU-YAO" },
                { code: "50505", area: "NYARLAY - NYARLAY - BUU-YAO" },
                { code: "50506", area: "ZUAHPLAY - ZUAHPLAY - BUU-YAO" },
                { code: "50507", area: "YAO LEPULA - YAO LEPULA - BUU-YAO" },
                { code: "50508", area: "DIAPLAY - DIAPLAY - BUU-YAO" },
                { code: "50509", area: "GBANWEA - GBANWEA - BUU-YAO" },
                { code: "50510", area: "DINPLAY - DINPLAY - BUU-YAO" },
                { code: "50511", area: "TEAHPLAY - TEAHPLAY - BUU-YAO" },
                { code: "50512", area: "BIAHPLAY - BIAHPLAY - BUU-YAO" },
                { code: "50513", area: "TANWEA - TANWEA - BUU-YAO" },
                { code: "50514", area: "BUUTUO - BUUTUO - BUU-YAO" },
                { code: "50515", area: "GOMAHPLAY - GOMAHPLAY - BUU-YAO" },
                { code: "50516", area: "BLEMIEPLAY - BLEMIEPLAY - BUU-YAO" },
                { code: "50601", area: "TOWEH - TOWEH - BOE & QUILLA" },
                { code: "50602", area: "SARLAY - SARLAY - BOE & QUILLA" },
                { code: "50603", area: "MARLAY - MARLAY - BOE & QUILLA" },
                { code: "50604", area: "GAYEA - GAYEA - KPARBLEE" },
                { code: "50605", area: "DUBUZON - DUBUZON - KPARBLEe" },
                { code: "50606", area: "TAPPITA - TAPPITA - DOE" },
                { code: "50607", area: "VAHN - VAHN - DOE" },
                { code: "50608", area: "KWIPEA - KWIPEA - DOE" },
                { code: "50701", area: "KPAYTUO - KPAYTUO - WEE-GBEHYI" },
                { code: "50702", area: "LOYEE - LOYEE - WEE-GBEHYI" },
                { code: "50703", area: "FLEEDIN - FLEEDIN - WEE-GBEHYI" },
                { code: "50704", area: "GUAWIN - GUAWIN - WEE-GBEHYI" },
                { code: "50705", area: "NYAO - NYAO - WEE-GBEHYI" },
                { code: "50706", area: "NYANSIN - NYANSIN - WEE-GBEHYI" },
                { code: "50707", area: "GBANQUOI - GBANQUOI - WEE-GBEHYI" },
                { code: "50708", area: "SANQUOI - SANQUOI - WEE-GBEHYI" },
                { code: "50709", area: "BUEH - BUEH - WEE-GBEHYI" },
                { code: "50710", area: "MEHNPA - MEHNPA - WEE-GBEHYI" },
                { code: "50711", area: "TROUPOE - TROUPOE - ZOE-GBAO" },
                { code: "50712", area: "BUANPLAY - BUANPLAY - ZOE-GBAO" },
                { code: "50713", area: "BEHYEPEA - BEHYEPEA - ZOE-GBAO" },
                { code: "50714", area: "ZANTUO - ZANTUO - ZOE-GBAO" },
                { code: "50715", area: "BAHN - BAHN CITY - ZOE-GBAO" },
                { code: "50716", area: "BUU-GBOR - BUU-GBOR - ZOE-GBAO" },
                { code: "50717", area: "GBLAH - GBLAH - ZOE-GBAO" },
                { code: "50718", area: "MIAPLAY - MIAPLAY - ZOE-GBAO" },
                { code: "50719", area: "ZAYGLAY - ZAYGLAY - ZOE-GBAO" },
                { code: "50720", area: "GORLAY - GORLAY - ZOE-GBAO" },
                { code: "50721", area: "ZOE-LUAPA - ZOE-LUAPA - ZOE-GBAO" },
                { code: "50801", area: "GAMPA - GAMPA - MEINPEA-MAHN" },
                { code: "50802", area: "BANLAH - BANLAH - MEINPEA-MAHN" },
                { code: "50803", area: "TONWIN - TONWIN - MEINPEA-MAHN" },
                { code: "50804", area: "BUNADIN - BUNADIN - MEINPEA-MAHN" },
                { code: "50805", area: "GARNWIN - GARNWIN - MEINPEA-MAHN" },
                { code: "50806", area: "TINYEE - TINYEE - MEINPEA-MAHN" },
                { code: "50807", area: "SOKOPA - SOKOPA - MEINPEa-MAHN" },
                { code: "50808", area: "GBLEHYEE - GBLEHYEE - MEINPEA-MAHN" },
                { code: "50809", area: "KPEIN - KPEIN - MEINPEA-MAHN" },
                { code: "50810", area: "TUNUKPUYEE - TUNUKPUYEE - MEINPEA-MAHN" },
                { code: "50811", area: "WHENTEN - WHENTEN - LEEWEHPEA-MAHN" },
                { code: "50812", area: "GIPO - GIPO - LEEWEHPEA-MAHN" },
                { code: "50813", area: "FLUMPA - FLUMPA - LEEWEHPEA-MAHN" },
                { code: "50814", area: "BLOHN - BLOHN - LEEWEHPEA-MAHN" },
                { code: "50815", area: "BINDIN - BINDIN - LEEWEHPEA-MAHN" },
                { code: "50816", area: "DOHN - DOHN - LEEWEHPEA-MAHN" },
                { code: "50817", area: "KPALLAH - KPALLAH - LEEWEHPEA-MAHN" },
                { code: "50901", area: "ZAROGBO - ZAROGBO - GBI & DORU" },
                { code: "50902", area: "ZEEWROH - ZEEWROH - GBI & DORU" },
                { code: "50903", area: "WONTOE - WONTOE - GBI & DORU" },
                { code: "50904", area: "ZAHN ZAYEE - ZAHN ZAYEE - YARWEIN-MEHNSONOH" },
                { code: "50905", area: "ZEKEPA - ZEKEPA - YARWEIN-MEHNSONOH" }
              ],
              "Lofa": [
                { code: "60101", area: "NDAMA - NDAMA - FOYA" },
                { code: "60102", area: "KONKPAMA - KONKPAMA - FOYA" },
                { code: "60103", area: "FOYA - FOYA CITY - FOYA" },
                { code: "60104", area: "FASSAPOE - FASSAPOE - FOYA" },
                { code: "60105", area: "SINAGOLE - SINAGOLE - FOYA" },
                { code: "60106", area: "NDEHUMA - NDEHUMA - FOYA" },
                { code: "60107", area: "YELAYALOE - YELAYALOE - FOYA" },
                { code: "60108", area: "BORLILOE - BORLILOE - FOYA" },
                { code: "60109", area: "BANDENIN - BANDENIN - FOYA" },
                { code: "60110", area: "BANDENIN MELIMU - BANDENIN MELIMU - FOYA" },
                { code: "60111", area: "LEPALOE - LEPALOE - FOYA" },
                { code: "60201", area: "KORTUMA - KORTUMA - VAHUN" },
                { code: "60202", area: "VAHUN - VAHUN CITY - VAHUN" },
                { code: "60203", area: "UPPER GUMA - UPPER GUMA - VAHUN" },
                { code: "60204", area: "KAMATAHUN - KAMATAHUN - WANHASSA" },
                { code: "60205", area: "POPALAHUN - POPALAHUN - WANHASSA" },
                { code: "60206", area: "LEHUMA - LEHUMA - WANHASSA" },
                { code: "60208", area: "KIMBALOE - KIMBALOE - FOYA" },
                { code: "60301", area: "YASELAHUN - YASELAHUN - KOLAHUN" },
                { code: "60302", area: "BOWAHUN - BOWAHUN - KOLAHUN" },
                { code: "60303", area: "PASOLAHUN - PASOLAHUN - KOLAHUN" },
                { code: "60304", area: "KAMBOLAHUN - KAMBOLAHUN - KOLAHUN" },
                { code: "60305", area: "SOMALAHUN - SOMALAHUN - KOLAHUN" },
                { code: "60401", area: "KONIA - KONIA - ZORZOR" },
                { code: "60402", area: "BARZIWEN - BARZIWEN - ZORZOR" },
                { code: "60403", area: "KARZAH - KARZAH - VOINJAMA" },
                { code: "60404", area: "ZOGOLEMAI - ZOGOLEMAI - VOINJAMA" },
                { code: "60405", area: "DAYZABAH - DAYZabah - VOINJAMA" },
                { code: "60406", area: "KESSELEMAI - KESSELEMAI - VOINJAMA" },
                { code: "60407", area: "WARBALAMAI - WARBALAMAI - VOINJAMA" },
                { code: "60408", area: "VOINJAMA - VOINJAMA - VOINJAMA" },
                { code: "60409", area: "WANGLODU - WANGLODU - QUARDU GBONI" },
                { code: "60410", area: "BARKEDU - BARKEDU - QUARDU GBONI" },
                { code: "60411", area: "SYLAKORLOR - SYLAKORLOR - QUARDU GBONI" },
                { code: "60412", area: "WOMAMA - WOMAMA - QUARDU GBONI" },
                { code: "60413", area: "SAYGBAMA - SAYGBAMA - QUARDU GBONI" },
                { code: "60501", area: "KPETEYEA - KPETEYEA - SALAYEA" },
                { code: "60502", area: "GANGLOTA - GONGLOTA - SALAYEA" },
                { code: "60503", area: "GBONYEA - GBONYEA - SALAYEA" },
                { code: "60504", area: "SALAYEA - SALAYEA - SALAYEA" },
                { code: "60505", area: "TAILEMAI - TAILEMAI - SALAYEA" },
                { code: "60506", area: "SUCROMU - SUCROMU - SALAYEA" },
                { code: "60507", area: "KPAIYEA - KPAIYEA - SALAYEA" },
                { code: "60508", area: "FASSAWALAZU - FASSAWALAZU - ZORZOR" },
                { code: "60509", area: "ZOLOWO - ZOLOWO - ZORZOR" },
                { code: "60510", area: "KILEWU - KILEWU - ZORZOR" },
                { code: "60511", area: "ZORZOR - ZORZOR - ZORZOR" },
                { code: "60512", area: "YEALA - YEALA - ZORZOR" },
                { code: "60513", area: "FISSIBU - FISSIBU - ZORZOR" },
                { code: "60514", area: "BALOMA - BALOMA - ZORZOR" },
                { code: "60515", area: "WOULOWUMO - WOULOWUMO - ZORZOR" },
                { code: "60516", area: "WUOMAI - WUOMAI - ZORZOR" },
                { code: "60517", area: "BALAGWALAZU - BALAGWALAZU - ZORZOR" },
                { code: "60518", area: "BODAH - BODAH - ZORZOR" },
                { code: "60519", area: "WANLEIMA - WANLEIMA - ZORZOR" },
                { code: "60520", area: "ZELEMAI - ZELEMAI - ZORZOR" },
                { code: "60521", area: "BORKEZA - BORKEZA - ZORZOR" },
                { code: "60522", area: "WARKESU - WARKESU - ZORZOR" },
                { code: "60523", area: "ZIGGIDA - ZIGGIDA - ZORZOR" }
              ],
              "Bomi": [
                { code: "71101", area: "BESAO - BESAO - SENJEH" },
                { code: "71102", area: "GAYAH HILL - GAYAH HILL - SENJEH" },
                { code: "71103", area: "BAIMA - BAIMA - SENJEH" },
                { code: "71104", area: "BEAJAH - BEAJAH - SENJEH" },
                { code: "71105", area: "WEAKAMA - WEAKAMA - SENJEH" },
                { code: "71106", area: "BEAFINIE - BEAFINIE - SENJEH" },
                { code: "71107", area: "ZAMIAH - ZAMIAH - SENJEH" },
                { code: "71108", area: "BARMO - BARMO - SENJEH" },
                { code: "71109", area: "TUBMANBURG - TUBMANBURG - SENJEH" },
                { code: "71110", area: "MAHER - MAHER - SENJEH" },
                { code: "71111", area: "BOLA - BOLA - SENJEH" },
                { code: "71112", area: "SACKIE - SACKIE - SENJEH" },
                { code: "71201", area: "KOWADEE - KOWADEE - KLAY" },
                { code: "71202", area: "GOGEHN - GOGEHN - KLAY" },
                { code: "71203", area: "GUIE - GUIE - KLAY" },
                { code: "71204", area: "SIEH - SIEH - KLAY" },
                { code: "71205", area: "MALEMA - MALEMA - KLAY" },
                { code: "71206", area: "MAMJAMA - MAMJAMA - DOWEIN" },
                { code: "71208", area: "VORTOR - VORTOR - DOWEIN" },
                { code: "71209", area: "GBAIGBON - GBAIGBON - DOWEIN" },
                { code: "71301", area: "MECCA - MECCA - SUEHN MECCA" },
                { code: "71302", area: "MALOMA - MALOMA - SUEHN MECCA" },
                { code: "71303", area: "SONODEE - SONODEE - SUEHN MECCA" },
                { code: "71304", area: "SUEHN - SUEHN - SUEHN MECCA" },
                { code: "71305", area: "BEYAN - BEYAN - SUEHN MECCA" },
                { code: "71306", area: "VINCENT - VINCENT - DOWEIN" },
                { code: "71307", area: "JENNEH - JENNEH - DOWEIN" },
                { code: "71308", area: "BONOR - BONOR - DOWEIN" }
              ],
              "Gbarpolu": [
                { code: "72101", area: "BOMBOMAH - BOMBOMAH - BOPOLU" },
                { code: "72102", area: "LOWER BONDI MANDINGO - LOWER BONDI MANDINGO - BOPOLU" },
                { code: "72103", area: "UPPER BONDI MANDINGO - UPPER BONDI MANDINGO - BOPOLU" },
                { code: "72104", area: "GONGBAYAH - GONGBAYAH - BOPOLU" },
                { code: "72105", area: "MEDINA - BOPOLU - BOPOLU" },
                { code: "72106", area: "DORLEHLALA - BOPOLU - BOPOLU" },
                { code: "72107", area: "LOWOMAH - BOPOLU - BOPOLU" },
                { code: "72108", area: "SAPPIMAH - BOPOLU - BOPOLU" },
                { code: "72109", area: "FARWEHNTA CENTRAL - BOPOLU - BOPOLU" },
                { code: "72110", area: "GUYAN-TA - BOPOLU - BOPOLU" },
                { code: "72111", area: "TAWALATA - TAWALATA - BOPOLU" },
                { code: "72201", area: "FASSAMA - FASSAMA - BELLEH" },
                { code: "72202", area: "BELLEH YALLAH - BELLEH YALLAH - BELLEH" },
                { code: "72203", area: "KPAWOLOWU - KPAWOLOWU - BELLEH" },
                { code: "72204", area: "BALOMA - BALOMA - BELLEH" },
                { code: "72205", area: "GATIMA - GATIMA - BELLEH" },
                { code: "72206", area: "TIGGELEE - TIGGELEE - BELLEH" },
                { code: "72207", area: "GOMU - GOMU - GOUNWOLAILA" },
                { code: "72208", area: "KELLEH - KELLEH - GOUNWOLAILa" },
                { code: "72209", area: "GOU - GOU - GOUNWOLAILA" },
                { code: "72210", area: "ZEAYEA - ZEAYEA - GOUNWOLAILA" },
                { code: "72211", area: "ZALAKAI - ZALAKAI - BOKOMU" },
                { code: "72212", area: "SALAYAH - SALAYAH - BOKOMU" },
                { code: "72213", area: "MOILAKWELLE - MOILAKWELLE - BOKOMU" },
                { code: "72214", area: "GBELLETA - GBELLETA - BOKOMU" },
                { code: "72301", area: "WEASUA - WEASUA - GBARMA" },
                { code: "72302", area: "BALLAH & BASSA - BALLAH & BASSA - GBARMA" },
                { code: "72303", area: "SMITH - SMITH - GBARMA" },
                { code: "72304", area: "SIRLEAF - SIRLEAF - GBARMA" },
                { code: "72305", area: "BEATOE - BEATOE - GBARMA" },
                { code: "72306", area: "BEADEN - BEADEN - KONGBA" },
                { code: "72307", area: "GBAR - GBAR - KONGBA" },
                { code: "72308", area: "ZUIE - ZUIE - KONGBA" },
                { code: "72309", area: "BEATHOU - BEATHOU - KONGBA" },
                { code: "72310", area: "JAWAJAH - JAWAJAH - KONGBA" },
                { code: "72311", area: "KUNGBOR - KUNGBOR - KONGBA" },
                { code: "72312", area: "PAMBAYA - PAMBAYA - KONGBA" },
                { code: "72313", area: "NOMODATANAU - NOMODATANAU - KONGBA" }
              ],
              "Grand Cape Mount": [
                { code: "73101", area: "JENNEMANA - JANNEMANA - GOLA KONNEH" },
                { code: "73102", area: "GONDOR - GONDOR - GOLA KONNEH" },
                { code: "73103", area: "TAHN - TAHN - GOLA KONNEH" },
                { code: "73104", area: "MECCA - MECCA - GOLA KONNEH" },
                { code: "73105", area: "MANAGORDUAH - MANAGORDUAH - GOLA KONNEH" },
                { code: "73106", area: "FULAH CAMP - FUALH CAMP - PORKPA" },
                { code: "73107", area: "SOKPO - SOKPO - PORKPA" },
                { code: "73108", area: "KONGO - KONGO - PORKPA" },
                { code: "73109", area: "BUNDUMA - BUNDUMA - PORKPA" },
                { code: "73110", area: "JEIJUAH - JEIJUAH - PORKPA" },
                { code: "73111", area: "SEIMAVULA - SEIMAVULA - PORKPA" },
                { code: "73201", area: "GRASS FIELD - ROBERTSPORT - ROBERTSPORT" },
                { code: "73202", area: "KRU TOWN - ROBERTSPORT - ROBERTSPORT" },
                { code: "73203", area: "CENTRAL ROBERTSPORT - ROBERTSPORT - ROBERTSPORT" },
                { code: "73204", area: "UP TOWN - ROBERTSPORT - ROBERTSPORT" },
                { code: "73205", area: "GONBOJAH - ROBERTSPORT - ROBERTSPORT" },
                { code: "73206", area: "LONDIJAI - ROBERTSPORT - ROBERTSPORT" },
                { code: "73207", area: "GBASSALOR - ROBRTSPORT - ROBERTSPORT" },
                { code: "73208", area: "KIAZOLU - KIAZOLU - GARWULA" },
                { code: "73209", area: "GION - GION - GARWULA" },
                { code: "73210", area: "ZOEGBOE - ZOEGBOE - GARWULA" },
                { code: "73211", area: "ZODUA - ZODUA - GARWULA" },
                { code: "73301", area: "SAMBOLA - SAMBOLA - TEWOR" },
                { code: "73302", area: "KIAWU - KIAWU - TEWOR" },
                { code: "73303", area: "FAHNBULLEH - FAHNBULLEH - TEWOR" },
                { code: "73304", area: "PASSAWE - PASSAWE - TEWOR" },
                { code: "73305", area: "MENDE-MASSA - MENDE-MASSA - TEWOR" },
                { code: "73306", area: "KROMAH - KROMAH - TEWOR" },
                { code: "73307", area: "BO WATERSIDE - BO WATERSIDE - TEWOR" }
              ]
            };

        // Global variables to store data between forms
        let currentParcelId = null;
        let uploadedImageUrls = {};
        const GCP_BASE_URL = "https://storage.googleapis.com/liblandlock/";
        const API_BASE = "https://libpayapp.liberianpost.com:8081";
        
        // Store existing data to prevent duplicates
        let existingPersons = [];
        let existingParcels = [];
        let existingOwnerships = [];
        
        // Map variables
        let map;
        let drawnPolygon = null;
        let drawingManager = null;

        // Get user data from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const userData = JSON.parse(localStorage.getItem('user'));
            
            if (userData) {
                // Populate user information
                document.getElementById('userName').textContent = `${userData.first_name} ${userData.last_name}`;
                document.getElementById('userDSSN').textContent = userData.dssn || 'N/A';
                document.getElementById('userEmail').textContent = userData.email || 'N/A';
                document.getElementById('userId').textContent = userData.user_id || 'N/A';
                
                // Set user image if available
                if (userData.image) {
                    document.getElementById('userImage').src = userData.image;
                } else {
                    // Set a default avatar if no image is available
                    document.getElementById('userImage').src = 'https://via.placeholder.com/80';
                }
                
                // Set account creation date to today for demo purposes
                const today = new Date();
                document.getElementById('accountCreated').textContent = today.toLocaleDateString();
            } else {
                // Redirect to login if no user data found
                window.location.href = 'login.html';
            }
            
            // Initialize modal functionality
            initModal();
            
            // Initialize map
            initMap();
            
            // Populate county dropdown
            const countySelect = document.getElementById('county');
            counties.forEach(county => {
                const option = document.createElement('option');
                option.value = county;
                option.textContent = county;
                countySelect.appendChild(option);
            });
            
            // Add event listener for county change to update postal codes
            countySelect.addEventListener('change', function() {
                updatePostalCodes(this.value);
            });
            
            // Initialize file upload functionality
            initFileUploads();
            
            // Initialize form submissions
            initFormSubmissions();
            
            // Load existing data for validation
            loadExistingData();
        });
        
        // Initialize map
        function initMap() {
            // Default center on Liberia
            const liberiaCenter = { lat: 6.428055, lng: -9.429499 };
            
            // Create map
            map = new google.maps.Map(document.getElementById('map'), {
                center: liberiaCenter,
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.HYBRID
            });
            
            // Initialize drawing manager
            drawingManager = new google.maps.drawing.DrawingManager({
                drawingMode: null,
                drawingControl: false,
                polygonOptions: {
                    fillColor: '#1E90FF',
                    fillOpacity: 0.3,
                    strokeWeight: 2,
                    strokeColor: '#1E90FF',
                    editable: true,
                    draggable: false
                }
            });
            
            drawingManager.setMap(map);
            
            // Add event listeners for drawing events
            google.maps.event.addListener(drawingManager, 'polygoncomplete', function(polygon) {
                // Clear any existing polygon
                if (drawnPolygon) {
                    drawnPolygon.setMap(null);
                }
                
                drawnPolygon = polygon;
                updateBoundaryField(polygon);
                
                // Listen for edits to the polygon
                google.maps.event.addListener(polygon.getPath(), 'set_at', function() {
                    updateBoundaryField(polygon);
                });
                
                google.maps.event.addListener(polygon.getPath(), 'insert_at', function() {
                    updateBoundaryField(polygon);
                });
            });
            
            // Add event listeners for drawing buttons
            document.getElementById('drawPolygonBtn').addEventListener('click', function() {
                drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYGON);
            });
            
            document.getElementById('clearPolygonBtn').addEventListener('click', function() {
                if (drawnPolygon) {
                    drawnPolygon.setMap(null);
                    drawnPolygon = null;
                }
                document.getElementById('boundary').value = '';
                drawingManager.setDrawingMode(null);
            });

            // Add event listener for verify button
            document.getElementById('verifyBoundaryBtn').addEventListener('click', function() {
                const boundaryField = document.getElementById('boundary');
                if (validatePolygonField(boundaryField)) {
                    const wkt = cleanWKT(boundaryField.value);
                    displayPolygonFromWKT(wkt);
                }
            });
        }
        
        // Update boundary field based on drawn polygon
        function updateBoundaryField(polygon) {
            const path = polygon.getPath();
            const coordinates = [];
            
            for (let i = 0; i < path.getLength(); i++) {
                const point = path.getAt(i);
                coordinates.push(`${point.lng()} ${point.lat()}`);
            }
            
            // Close the polygon if not already closed
            if (coordinates.length > 0) {
                const firstPoint = coordinates[0];
                coordinates.push(firstPoint);
            }
            
            document.getElementById('boundary').value = `POLYGON((${coordinates.join(',')}))`;
        }

        // Display polygon from WKT on map
        function displayPolygonFromWKT(wkt) {
            if (drawnPolygon) {
                drawnPolygon.setMap(null);
            }

            if (!isValidWKT(wkt)) {
                showStatus('landParcelStatus', 'Invalid WKT format', 'error');
                return;
            }

            const coords = wkt.match(/[-+]?\d*\.?\d+\s+[-+]?\d*\.?\d+/g);
            const path = coords.map(coord => {
                const [lngStr, latStr] = coord.split(/\s+/);
                const lng = parseFloat(lngStr);
                const lat = parseFloat(latStr);
                return { lat, lng };
            });

            drawnPolygon = new google.maps.Polygon({
                paths: path,
                fillColor: '#1E90FF',
                fillOpacity: 0.3,
                strokeWeight: 2,
                strokeColor: '#1E90FF',
                editable: true,
                map: map
            });

            // Fit bounds
            const bounds = new google.maps.LatLngBounds();
            path.forEach(p => bounds.extend(p));
            map.fitBounds(bounds);

            // Listen for edits
            google.maps.event.addListener(drawnPolygon.getPath(), 'set_at', function() {
                updateBoundaryField(drawnPolygon);
            });

            google.maps.event.addListener(drawnPolygon.getPath(), 'insert_at', function() {
                updateBoundaryField(drawnPolygon);
            });
        }
        
        // Load existing data to prevent duplicates
        async function loadExistingData() {
            try {
                // Load existing persons
                const personsResponse = await fetch(`${API_BASE}/api/persons`);
                if (personsResponse.ok) {
                    existingPersons = await personsResponse.json();
                    populateDatalist('owner-dssn-list', existingPersons
                        .filter(p => p.Role === 'Landowner' || p.Role === 'Both')
                        .map(p => p.DSSN));
                    populateDatalist('surveyor-dssn-list', existingPersons
                        .filter(p => p.Role === 'Surveyor' || p.Role === 'Both')
                        .map(p => p.DSSN));
                }
                
                // Load existing parcels
                const parcelsResponse = await fetch(`${API_BASE}/api/land-parcels`);
                if (parcelsResponse.ok) {
                    existingParcels = await parcelsResponse.json();
                    populateDatalist('parcel-id-list', existingParcels.map(p => p.Parcel_ID));
                }
                
                // Load existing ownerships
                const ownershipsResponse = await fetch(`${API_BASE}/api/land-ownerships`);
                if (ownershipsResponse.ok) {
                    existingOwnerships = await ownershipsResponse.json();
                }
            } catch (error) {
                console.error('Error loading existing data:', error);
            }
        }
        
        // Populate datalist with options
        function populateDatalist(listId, values) {
            const datalist = document.getElementById(listId);
            datalist.innerHTML = '';
            
            values.forEach(value => {
                const option = document.createElement('option');
                option.value = value;
                datalist.appendChild(option);
            });
        }
        
        // Update postal codes based on selected county
        function updatePostalCodes(countyName) {
            const postalCodeSelect = document.getElementById('postal-code');
            
            // Clear existing options
            postalCodeSelect.innerHTML = '<option value="">Select Postal Code</option>';
            
            // Add new options based on selected county
            if (postalCodes[countyName]) {
                postalCodes[countyName].forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.code;
                    option.textContent = `${item.code} - ${item.area}`;
                    postalCodeSelect.appendChild(option);
                });
            }
        }
        
        // Initialize file upload functionality
        function initFileUploads() {
            const fileInputs = document.querySelectorAll('.file-upload-input');
            
            fileInputs.forEach(input => {
                input.addEventListener('change', function() {
                    const fileName = this.files[0] ? this.files[0].name : 'No file chosen';
                    const fileNameElement = document.getElementById(`${this.id}-name`);
                    if (fileNameElement) {
                        fileNameElement.textContent = fileName;
                    }
                    
                    // Show preview for image files
                    if (this.files && this.files[0] && this.files[0].type.startsWith('image/')) {
                        const reader = new FileReader();
                        const previewId = `${this.id}-preview`;
                        const previewImgId = `${this.id.replace('file', 'preview')}-img`;
                        
                        reader.onload = function(e) {
                            const previewElement = document.getElementById(previewId);
                            const previewImg = document.getElementById(previewImgId);
                            
                            if (previewElement && previewImg) {
                                previewImg.src = e.target.result;
                                previewElement.style.display = 'block';
                                
                                // Upload the image and get the URL
                                uploadImageAndGetUrl(input.files[0], this.id.replace('-file', ''));
                            }
                        };
                        
                        reader.readAsDataURL(this.files[0]);
                    }
                });
            });
            
            // Add copy URL functionality
            document.getElementById('copy-person-url').addEventListener('click', function() {
                copyToClipboard('person-image-url');
            });
            
            document.getElementById('copy-document-url').addEventListener('click', function() {
                copyToClipboard('document-url');
            });
        }
        
        // Upload image and get URL
        async function uploadImageAndGetUrl(file, type) {
            try {
                showStatus(`${type}Status`, 'Uploading image...', 'info');
                
                const formData = new FormData();
                formData.append('image', file);
                
                const response = await fetch(`${API_BASE}/api/upload-image`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    const imageUrl = result.imageUrl;
                    const urlDisplay = document.getElementById(`${type}-image-url-display`);
                    const urlInput = document.getElementById(`${type}-image-url`);
                    
                    if (urlDisplay) {
                        urlDisplay.innerHTML = `
                            <p><strong>Image URL:</strong> ${imageUrl}</p>
                            <button type="button" class="copy-url-btn" id="copy-${type}-url">
                                <i class="fas fa-copy"></i> Copy URL
                            </button>
                        `;
                        
                        // Reattach event listener
                        document.getElementById(`copy-${type}-url`).addEventListener('click', function() {
                            copyToClipboard(`${type}-image-url`);
                        });
                    }
                    
                    if (urlInput) {
                        urlInput.value = imageUrl;
                    }
                    
                    showStatus(`${type}Status`, 'Image uploaded successfully!', 'success');
                } else {
                    showStatus(`${type}Status`, `Error: ${result.message}`, 'error');
                }
            } catch (error) {
                console.error('Error uploading image:', error);
                showStatus(`${type}Status`, 'Error uploading image. Please try again.', 'error');
            }
        }
        
        // Copy URL to clipboard
        function copyToClipboard(inputId) {
            const inputElement = document.getElementById(inputId);
            if (inputElement) {
                inputElement.select();
                document.execCommand('copy');
                
                // Show copied notification
                const originalText = inputElement.value;
                showStatus(`${inputId.replace('-url', '')}Status`, 'URL copied to clipboard!', 'success');
            }
        }
        
        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function() {
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        });
        
        // Modal functionality
        function initModal() {
            const modal = document.getElementById('landRegistrationModal');
            const landRegistrationCard = document.getElementById('landRegistrationCard');
            const closeModal = document.querySelector('.close-modal');
            const tabs = document.querySelectorAll('.modal-tab');
            const cancelButtons = document.querySelectorAll('.btn-cancel');
            
            // Open modal when Land Registration card is clicked
            landRegistrationCard.addEventListener('click', function() {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
            
            // Close modal when X is clicked
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                resetAllForms();
            });
            
            // Close modal when cancel buttons are clicked
            cancelButtons.forEach(button => {
                button.addEventListener('click', function() {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    resetAllForms();
                });
            });
            
            // Close modal when clicking outside the modal content
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    resetAllForms();
                }
            });
            
            // Tab switching functionality
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Add owner functionality
            document.getElementById('add-owner').addEventListener('click', function() {
                const ownershipEntries = document.getElementById('ownership-entries');
                const newIndex = ownershipEntries.children.length + 1;
                const newEntry = document.createElement('div');
                newEntry.className = 'owner-entry';
                newEntry.innerHTML = `
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ownership-owner-dssn-${newIndex}" class="required-field">Owner DSSN</label>
                            <div class="dropdown-container">
                                <input type="text" id="ownership-owner-dssn-${newIndex}" list="owner-dssn-list" required>
                                <div class="validation-error" id="ownership-owner-dssn-${newIndex}-error">Valid Owner DSSN is required</div>
                            </div>
                        </div>
                    </div>
                    <div class="remove-owner">&times;</div>
                `;
                ownershipEntries.appendChild(newEntry);
                
                // Add event listener to remove button
                newEntry.querySelector('.remove-owner').addEventListener('click', function() {
                    if (ownershipEntries.children.length > 1) {
                        ownershipEntries.removeChild(newEntry);
                    }
                });
            });
        }
        
        // Initialize form submissions
        function initFormSubmissions() {
            // Person Form Submission
            document.getElementById('personForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await submitPersonForm();
            });
            
            // Land Parcel Form Submission
            document.getElementById('landParcelForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await submitLandParcelForm();
            });
            
            // Land Ownership Form Submission
            document.getElementById('landOwnershipForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await submitLandOwnershipForm();
            });
            
            // Document Form Submission
            document.getElementById('documentForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await submitDocumentForm();
            });
            
            // Add validation to required fields
            addValidationToForms();
        }
        
        // Add validation to all form fields
        function addValidationToForms() {
            // Add input validation for required fields
            const requiredInputs = document.querySelectorAll('input[required], select[required], textarea[required]');
            
            requiredInputs.forEach(input => {
                // Validate on blur
                input.addEventListener('blur', function() {
                    validateField(this);
                });
                
                // Remove error state on input
                input.addEventListener('input', function() {
                    if (this.value.trim() !== '') {
                        this.classList.remove('input-error');
                        const errorElement = document.getElementById(`${this.id}-error`);
                        if (errorElement) {
                            errorElement.style.display = 'none';
                        }
                    }
                });
            });
            
            // Special validation for unique fields
            document.getElementById('person-dssn').addEventListener('blur', function() {
                validateUniqueField(this, existingPersons.map(p => p.DSSN), 'DSSN already exists');
            });
            
            // Special validation for polygon field
            document.getElementById('boundary').addEventListener('blur', function() {
                validatePolygonField(this);
            });
        }
        
        // Validate a single field
        function validateField(field) {
            const errorElement = document.getElementById(`${field.id}-error`);
            
            if (!field.value.trim()) {
                field.classList.add('input-error');
                if (errorElement) {
                    errorElement.style.display = 'block';
                }
                return false;
            } else {
                field.classList.remove('input-error');
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
                return true;
            }
        }
        
        // Validate unique field
        function validateUniqueField(field, existingValues, errorMessage) {
            const errorElement = document.getElementById(`${field.id}-error`);
            
            if (!field.value.trim()) {
                field.classList.add('input-error');
                if (errorElement) {
                    errorElement.textContent = 'This field is required';
                    errorElement.style.display = 'block';
                }
                return false;
            } else if (existingValues.includes(field.value.trim())) {
                field.classList.add('input-error');
                if (errorElement) {
                    errorElement.textContent = errorMessage;
                    errorElement.style.display = 'block';
                }
                return false;
            } else {
                field.classList.remove('input-error');
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
                return true;
            }
        }
        
        // Validate polygon field
        function validatePolygonField(field) {
            const errorElement = document.getElementById(`${field.id}-error`);
            
            if (!field.value.trim()) {
                field.classList.add('input-error');
                if (errorElement) {
                    errorElement.textContent = 'Polygon is required';
                    errorElement.style.display = 'block';
                }
                return false;
            }
            
            try {
                const cleanedBoundary = cleanWKT(field.value);
                if (!isValidWKT(cleanedBoundary)) {
                    field.classList.add('input-error');
                    if (errorElement) {
                        errorElement.textContent = 'Invalid polygon format. Please use valid WKT format (e.g., POLYGON((x y, ...)))';
                        errorElement.style.display = 'block';
                    }
                    return false;
                }
                
                field.classList.remove('input-error');
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
                return true;
            } catch (error) {
                field.classList.add('input-error');
                if (errorElement) {
                    errorElement.textContent = 'Invalid polygon format. Please check the coordinates.';
                    errorElement.style.display = 'block';
                }
                return false;
            }
        }
        
        // Validate entire form
        function validateForm(formId) {
            const form = document.getElementById(formId);
            const requiredInputs = form.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            
            requiredInputs.forEach(input => {
                if (!validateField(input)) {
                    isValid = false;
                }
            });
            
            // Additional validation for specific forms
            if (formId === 'landParcelForm') {
                if (!validatePolygonField(document.getElementById('boundary'))) {
                    isValid = false;
                }
                
                // Validate surveyor exists and has surveyor role
                const surveyorDSSN = document.getElementById('surveyor-dssn').value;
                if (surveyorDSSN) {
                    const surveyor = existingPersons.find(p => p.DSSN === surveyorDSSN);
                    if (!surveyor || (surveyor.Role !== 'Surveyor' && surveyor.Role !== 'Both')) {
                        document.getElementById('surveyor-dssn').classList.add('input-error');
                        document.getElementById('surveyor-dssn-error').textContent = 'Surveyor DSSN must belong to a registered surveyor';
                        document.getElementById('surveyor-dssn-error').style.display = 'block';
                        isValid = false;
                    }
                }
            }
            
            if (formId === 'personForm') {
                const personDSSN = document.getElementById('person-dssn').value;
                if (personDSSN && existingPersons.map(p => p.DSSN).includes(personDSSN)) {
                    document.getElementById('person-dssn').classList.add('input-error');
                    document.getElementById('person-dssn-error').textContent = 'DSSN already exists';
                    document.getElementById('person-dssn-error').style.display = 'block';
                    isValid = false;
                }
            }
            
            if (formId === 'landOwnershipForm') {
                const parcelId = document.getElementById('ownership-parcel-id').value;
                if (parcelId && !existingParcels.map(p => p.Parcel_ID).includes(parseInt(parcelId))) {
                    document.getElementById('ownership-parcel-id').classList.add('input-error');
                    document.getElementById('ownership-parcel-id-error').textContent = 'Parcel ID does not exist. Please register the land parcel first.';
                    document.getElementById('ownership-parcel-id-error').style.display = 'block';
                    isValid = false;
                }
                
                const ownerDSSNs = document.querySelectorAll('#ownership-entries input[type="text"]');
                ownerDSSNs.forEach(input => {
                    const ownerDSSN = input.value;
                    if (ownerDSSN) {
                        const owner = existingPersons.find(p => p.DSSN === ownerDSSN);
                        if (!owner || (owner.Role !== 'Landowner' && owner.Role !== 'Both')) {
                            input.classList.add('input-error');
                            const errorElement = document.getElementById(`${input.id}-error`);
                            if (errorElement) {
                                errorElement.textContent = 'Owner DSSN must belong to a registered landowner';
                                errorElement.style.display = 'block';
                            }
                            isValid = false;
                        }
                    }
                });
            }
            
            if (formId === 'documentForm') {
                const ownerDSSN = document.getElementById('document-owner-dssn').value;
                if (ownerDSSN) {
                    const owner = existingPersons.find(p => p.DSSN === ownerDSSN);
                    if (!owner || (owner.Role !== 'Landowner' && owner.Role !== 'Both')) {
                        document.getElementById('document-owner-dssn').classList.add('input-error');
                        document.getElementById('document-owner-dssn-error').textContent = 'Owner DSSN must belong to a registered landowner';
                        document.getElementById('document-owner-dssn-error').style.display = 'block';
                        isValid = false;
                    }
                }
            }
            
            return isValid;
        }
        
        // Show status message
        function showStatus(elementId, message, type) {
            const statusElement = document.getElementById(elementId);
            statusElement.innerHTML = `<div class="status-message status-${type}">${message}</div>`;
            
            // Scroll to the status message
            statusElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // Show loading state
        function setLoadingState(formType, isLoading) {
            const spinner = document.getElementById(`${formType}Spinner`);
            const submitText = document.getElementById(`${formType}SubmitText`);
            
            if (isLoading) {
                spinner.style.display = 'inline-block';
                submitText.textContent = 'Processing...';
            } else {
                spinner.style.display = 'none';
                
                // Reset button text based on form type
                switch(formType) {
                    case 'person':
                        submitText.textContent = 'Register Person';
                        break;
                    case 'landParcel':
                        submitText.textContent = 'Register Land Parcel';
                        break;
                    case 'landOwnership':
                        submitText.textContent = 'Register Ownership';
                        break;
                    case 'document':
                        submitText.textContent = 'Upload Document';
                        break;
                }
            }
        }
        
        // Upload image to server
        async function uploadImage(file, imageType) {
            const formData = new FormData();
            formData.append('image', file);
            
            try {
                const response = await fetch(`${API_BASE}/api/upload-image`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    return result.imageUrl;
                } else {
                    throw new Error(result.message || 'Image upload failed');
                }
            } catch (error) {
                console.error('Error uploading image:', error);
                throw error;
            }
        }
        
        // Submit Person Form
        async function submitPersonForm() {
            // Validate form first
            if (!validateForm('personForm')) {
                showStatus('personStatus', 'Please fix the errors in the form before submitting', 'error');
                return;
            }
            
            const imageFile = document.getElementById('person-image').files[0];
            const imageUrlInput = document.getElementById('person-image-url').value;
            
            setLoadingState('person', true);
            
            try {
                let finalImageUrl = imageUrlInput;
                
                // If a file is uploaded, use it instead of the URL input
                if (imageFile) {
                    showStatus('personStatus', 'Uploading image...', 'info');
                    finalImageUrl = await uploadImage(imageFile, 'person');
                } else {
                    // If only URL is provided, ensure it's a complete URL
                    if (finalImageUrl && !finalImageUrl.startsWith('http')) {
                        finalImageUrl = GCP_BASE_URL + finalImageUrl;
                    }
                }
                
                // Then submit the form data
                const formData = {
                    DSSN: document.getElementById('person-dssn').value,
                    First_Name: document.getElementById('person-first-name').value,
                    Last_Name: document.getElementById('person-last-name').value,
                    Date_of_Birth: document.getElementById('person-dob').value,
                    Place_of_Birth: document.getElementById('person-place-of-birth').value,
                    Address: document.getElementById('person-address').value,
                    Phone_Number: document.getElementById('person-phone').value,
                    Image_URL: finalImageUrl,
                    License_ID: document.getElementById('person-license').value,
                    Role: document.getElementById('person-role').value
                };
                
                const response = await fetch(`${API_BASE}/api/person`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus('personStatus', 'Person registered successfully!', 'success');
                    
                    // Add to existing persons
                    existingPersons.push({ 
                        DSSN: formData.DSSN,
                        Role: formData.Role
                    });
                    
                    // Update datalists based on role
                    populateDatalist('owner-dssn-list', existingPersons
                        .filter(p => p.Role === 'Landowner' || p.Role === 'Both')
                        .map(p => p.DSSN));
                    populateDatalist('surveyor-dssn-list', existingPersons
                        .filter(p => p.Role === 'Surveyor' || p.Role === 'Both')
                        .map(p => p.DSSN));
                    
                    document.getElementById('personForm').reset();
                    document.getElementById('person-image-name').textContent = 'No file chosen';
                    document.getElementById('person-image-preview').style.display = 'none';
                } else {
                    showStatus('personStatus', `Error: ${result.message}`, 'error');
                }
            } catch (error) {
                console.error('Error submitting person:', error);
                showStatus('personStatus', 'Error processing request. Please try again.', 'error');
            } finally {
                setLoadingState('person', false);
            }
        }
        
        // Submit Land Parcel Form
        async function submitLandParcelForm() {
            // Validate form first
            if (!validateForm('landParcelForm')) {
                showStatus('landParcelStatus', 'Please fix the errors in the form before submitting', 'error');
                return;
            }
            
            const formData = {
                County: document.getElementById('county').value,
                Postal_Code: document.getElementById('postal-code').value,
                Area_Name: document.getElementById('area-name').value,
                Plot_Number: document.getElementById('plot-number').value,
                Boundary: document.getElementById('boundary').value,
                Date_Surveyed: document.getElementById('date-surveyed').value,
                Surveyor_DSSN: document.getElementById('surveyor-dssn').value
            };
            
            // Clean and validate polygon
            try {
                formData.Boundary = cleanWKT(formData.Boundary);
                if (!isValidWKT(formData.Boundary)) {
                    showStatus('landParcelStatus', 'Invalid polygon format. Please use valid WKT format (e.g., POLYGON((x y, ...)))', 'error');
                    return;
                }
            } catch (error) {
                showStatus('landParcelStatus', 'Invalid polygon format. Please check the coordinates.', 'error');
                return;
            }
            
            setLoadingState('landParcel', true);
            
            try {
                const response = await fetch(`${API_BASE}/api/land-parcel`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus('landParcelStatus', `Land parcel created successfully! Parcel ID: ${result.parcelId}`, 'success');
                    currentParcelId = result.parcelId;
                    
                    // Add to existing parcels
                    existingParcels.push({ Parcel_ID: result.parcelId });
                    populateDatalist('parcel-id-list', existingParcels.map(p => p.Parcel_ID));
                    
                    document.getElementById('landParcelForm').reset();
                    
                    // Clear map
                    if (drawnPolygon) {
                        drawnPolygon.setMap(null);
                        drawnPolygon = null;
                    }
                } else {
                    showStatus('landParcelStatus', `Error: ${result.message}`, 'error');
                }
            } catch (error) {
                console.error('Error submitting land parcel:', error);
                showStatus('landParcelStatus', 'Network error. Please try again.', 'error');
            } finally {
                setLoadingState('landParcel', false);
            }
        }
        
        // Helper function to clean WKT format
        function cleanWKT(wkt) {
            if (!wkt || typeof wkt !== 'string') return wkt;
            let cleaned = wkt.trim().replace(/\s+/g, ' ').replace(/\n/g, '');
        
            // Already valid → leave it
            if (/^POLYGON\s*\(\(.*\)\)$/i.test(cleaned)) return cleaned;
        
            // If POLYGON( but missing inner parens
            if (/^POLYGON\s*\(.*\)$/i.test(cleaned)) {
                cleaned = cleaned.replace(/^POLYGON\s*\(/i, 'POLYGON((');
                if (!cleaned.endsWith('))')) {
                    cleaned = cleaned.replace(/\)$/, '))');
                }
                return cleaned;
            }
        
            // Raw coords → wrap properly
            return `POLYGON((${cleaned}))`;
        }
        
        // Helper function to validate WKT format
        function isValidWKT(wkt) {
            if (!wkt || typeof wkt !== 'string') return false;
            const trimmedWkt = wkt.trim();
        
            if (!/^POLYGON\s*\(\(.*\)\)$/i.test(trimmedWkt)) return false;
        
            const coords = trimmedWkt.match(/[-+]?\d*\.?\d+\s+[-+]?\d*\.?\d+/g);
            return coords && coords.length >= 4;
        }
        
        // Submit Land Ownership Form
        async function submitLandOwnershipForm() {
            // Validate form first
            if (!validateForm('landOwnershipForm')) {
                showStatus('landOwnershipStatus', 'Please fix the errors in the form before submitting', 'error');
                return;
            }
            
            const parcelId = document.getElementById('ownership-parcel-id').value;
            const ownershipEntries = document.querySelectorAll('#ownership-entries input[type="text"]');
            const ownershipData = [];
            
            // Collect all ownership entries
            ownershipEntries.forEach(entry => {
                const ownerDSSN = entry.value;
                
                if (ownerDSSN) {
                    ownershipData.push({
                        Parcel_ID: parcelId,
                        Owner_DSSN: ownerDSSN
                    });
                }
            });
            
            if (ownershipData.length === 0) {
                showStatus('landOwnershipStatus', 'Please add at least one owner', 'error');
                return;
            }
            
            setLoadingState('landOwnership', true);
            
            try {
                // Submit each ownership record
                for (const data of ownershipData) {
                    const response = await fetch(`${API_BASE}/api/land-ownership`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    
                    const result = await response.json();
                    
                    if (!result.success) {
                        showStatus('landOwnershipStatus', `Error: ${result.message}`, 'error');
                        setLoadingState('landOwnership', false);
                        return;
                    }
                }
                
                showStatus('landOwnershipStatus', 'Land ownership registered successfully!', 'success');
                document.getElementById('landOwnershipForm').reset();
                
                // Remove additional owner entries
                const ownershipContainer = document.getElementById('ownership-entries');
                while (ownershipContainer.children.length > 1) {
                    ownershipContainer.removeChild(ownershipContainer.lastChild);
                }
            } catch (error) {
                console.error('Error submitting land ownership:', error);
                showStatus('landOwnershipStatus', 'Network error. Please try again.', 'error');
            } finally {
                setLoadingState('landOwnership', false);
            }
        }
        
        // Submit Document Form
        async function submitDocumentForm() {
            // Validate form first
            if (!validateForm('documentForm')) {
                showStatus('documentStatus', 'Please fix the errors in the form before submitting', 'error');
                return;
            }
            
            const file = document.getElementById('document-file').files[0];
            const urlInput = document.getElementById('document-url').value;
            
            // Check if at least one document source is provided
            if (!file && !urlInput) {
                showStatus('documentStatus', 'Please upload a document or provide a document URL', 'error');
                return;
            }
            
            setLoadingState('document', true);
            
            try {
                let finalUrl = urlInput;
                
                // If a file is uploaded, use it instead of the URL input
                if (file) {
                    showStatus('documentStatus', 'Uploading document...', 'info');
                    finalUrl = await uploadImage(file, 'document');
                } else {
                    // If only URL is provided, ensure it's a complete URL
                    if (finalUrl && !finalUrl.startsWith('http')) {
                        finalUrl = GCP_BASE_URL + finalUrl;
                    }
                }
                
                // Then submit the form data
                const formData = {
                    Image_URL: finalUrl,
                    Owner_DSSN: document.getElementById('document-owner-dssn').value,
                    Document_Type: document.getElementById('document-type').value
                };
                
                const response = await fetch(`${API_BASE}/api/document`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus('documentStatus', 'Document uploaded successfully!', 'success');
                    document.getElementById('documentForm').reset();
                    document.getElementById('document-file-name').textContent = 'No file chosen';
                    document.getElementById('document-image-preview').style.display = 'none';
                } else {
                    showStatus('documentStatus', `Error: ${result.message}`, 'error');
                }
            } catch (error) {
                console.error('Error submitting document:', error);
                showStatus('documentStatus', 'Error processing request. Please try again.', 'error');
            } finally {
                setLoadingState('document', false);
            }
        }
        
        // Reset all forms
        function resetAllForms() {
            document.getElementById('personForm').reset();
            document.getElementById('landParcelForm').reset();
            document.getElementById('landOwnershipForm').reset();
            document.getElementById('documentForm').reset();
            
            // Clear status messages
            document.getElementById('personStatus').innerHTML = '';
            document.getElementById('landParcelStatus').innerHTML = '';
            document.getElementById('landOwnershipStatus').innerHTML = '';
            document.getElementById('documentStatus').innerHTML = '';
            
            // Reset file names
            document.getElementById('person-image-name').textContent = 'No file chosen';
            document.getElementById('document-file-name').textContent = 'No file chosen';
            
            // Hide image previews
            document.getElementById('person-image-preview').style.display = 'none';
            document.getElementById('document-image-preview').style.display = 'none';
            
            // Remove additional owner entries
            const ownershipContainer = document.getElementById('ownership-entries');
            while (ownershipContainer.children.length > 1) {
                ownershipContainer.removeChild(ownershipContainer.lastChild);
            }
            
            // Clear error states
            const errorElements = document.querySelectorAll('.validation-error, .input-error');
            errorElements.forEach(element => {
                element.classList.remove('input-error');
                if (element.classList.contains('validation-error')) {
                    element.style.display = 'none';
                }
            });
            
            // Clear map
            if (drawnPolygon) {
                drawnPolygon.setMap(null);
                drawnPolygon = null;
            }
            document.getElementById('boundary').value = '';
        }
    </script>
    <!-- Google Maps API -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyATNMTYKT2bvDzWMBSKGl-HvYqNz1BzYfs&libraries=drawing&callback=initMap"></script>
</body>
</html>
